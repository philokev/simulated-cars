[
    {
        "id": "97ea1ba1.9cee7",
        "type": "tab",
        "label": "Monitoring Flow"
    },
    {
        "id": "d574f97d.4d29a8",
        "type": "tab",
        "label": "Alert Configuration"
    },
    {
        "id": "efbe0ac4.93412",
        "type": "tab",
        "label": "Virtual Thermostat"
    },
    {
        "id": "5aba5c1a.28fe7c",
        "type": "tab",
        "label": "Simulation Dashboard"
    },
    {
        "id": "d0044561.02b458",
        "type": "tab",
        "label": "Anomaly Detection"
    },
    {
        "id": "63c5fa2.b19a184",
        "type": "tab",
        "label": "Weather"
    },
    {
        "id": "e46f1d17.0165a",
        "type": "tab",
        "label": "Context Mapping"
    },
    {
        "id": "90969cec.056bc",
        "type": "subflow",
        "name": "Alarm/Alert check",
        "info": "",
        "in": [
            {
                "x": 63,
                "y": 109,
                "wires": [
                    {
                        "id": "9046cf9d.d6a83"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 751,
                "y": 111,
                "wires": [
                    {
                        "id": "9b297a5.c044c88",
                        "port": 1
                    },
                    {
                        "id": "9b297a5.c044c88",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1044,
                "y": 195,
                "wires": [
                    {
                        "id": "99a63c4e.17e72",
                        "port": 0
                    }
                ]
            }
        ]
    },
    {
        "id": "175817de.c3752",
        "type": "subflow",
        "name": "Alert Service Engineer",
        "info": "",
        "in": [
            {
                "x": 70.44444274902344,
                "y": 98.11110305786133,
                "wires": [
                    {
                        "id": "1ef1baa5.1d3685"
                    }
                ]
            }
        ],
        "out": []
    },
    {
        "id": "5514de4c.7fdd7",
        "type": "subflow",
        "name": "Generate Ticket",
        "info": "",
        "in": [
            {
                "x": 360,
                "y": 640,
                "wires": [
                    {
                        "id": "997b19ec.696f7"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1060,
                "y": 640,
                "wires": [
                    {
                        "id": "dc8424da.aaed",
                        "port": 0
                    }
                ]
            }
        ]
    },
    {
        "id": "50ec126d.8ab59c",
        "type": "subflow",
        "name": "Subflow 1",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "75510ab5.8cb94c",
        "type": "subflow",
        "name": "Subflow 1 (2)",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "1fc8f04b.ddf7e8",
        "type": "subflow",
        "name": "Subflow 1 (3)",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "efd399ef.f7d2b",
        "type": "subflow",
        "name": "Subflow 1 (4)",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "7fdccf7c.3164",
        "type": "subflow",
        "name": "Subflow 1 (2) (2)",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "97144fa0.923738",
        "type": "subflow",
        "name": "Subflow 1 (3) (2)",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "ab27421e.a54d7",
        "type": "ui_group",
        "z": "",
        "name": "Car Status",
        "tab": "3f2340dd.4e5f5",
        "order": 2,
        "disp": true,
        "width": "24"
    },
    {
        "id": "b561db29.33fd2",
        "type": "Device Schema",
        "z": "",
        "deviceType": "Car",
        "props": [
            {
                "guid": "be6df8b37d4d",
                "name": "Location",
                "defaultValue": {
                    "type": "str",
                    "value": "Car 1"
                }
            },
            {
                "guid": "6f2a07396cd9",
                "name": "CurrentSpeed",
                "random": {
                    "func": "integer",
                    "args": {
                        "min": 0,
                        "max": 120
                    }
                }
            },
            {
                "guid": "d4635e2ba240",
                "name": "PowerConsumption",
                "random": {
                    "func": "integer",
                    "args": {
                        "min": 0,
                        "max": 100
                    }
                }
            },
            {
                "guid": "c8b7ed48f1b0",
                "name": "FuelLevel",
                "random": {
                    "func": "integer",
                    "args": {
                        "min": 0,
                        "max": 100
                    }
                }
            },
            {
                "guid": "9a4d1de08a11",
                "name": "EngineTemperature",
                "random": {
                    "func": "integer",
                    "args": {
                        "min": 0,
                        "max": 100
                    }
                }
            },
            {
                "guid": "4a3d9962af3e",
                "name": "Latitude",
                "defaultValue": {
                    "type": "num",
                    "value": "0"
                }
            },
            {
                "guid": "714289994d5d",
                "name": "Longitude",
                "defaultValue": {
                    "type": "num",
                    "value": "0"
                }
            }
        ],
        "evts": [
            {
                "guid": "a0f0dab2a891",
                "name": "getActualTemperature"
            },
            {
                "guid": "f5e261ed3706",
                "name": "getAll",
                "payload": {
                    "properties": {
                        "0": "be6df8b37d4d",
                        "1": "6f2a07396cd9",
                        "2": "d4635e2ba240",
                        "3": "c8b7ed48f1b0",
                        "4": "9a4d1de08a11",
                        "5": "4a3d9962af3e",
                        "6": "714289994d5d",
                        "length": 7,
                        "prevObject": {
                            "0": "be6df8b37d4d",
                            "1": "6f2a07396cd9",
                            "2": "d4635e2ba240",
                            "3": "c8b7ed48f1b0",
                            "4": "9a4d1de08a11",
                            "5": "4a3d9962af3e",
                            "6": "714289994d5d",
                            "length": 7,
                            "prevObject": {
                                "0": {},
                                "1": {},
                                "2": {},
                                "3": {},
                                "4": {},
                                "5": {},
                                "6": {},
                                "length": 7,
                                "prevObject": {
                                    "0": {
                                        "sizzle1496076078203": {
                                            "parentNode": [
                                                164453,
                                                63,
                                                true
                                            ]
                                        }
                                    },
                                    "selector": ".red-ui-editableList-item-content",
                                    "context": {
                                        "sizzle1496076078203": {
                                            "parentNode": [
                                                163138.54949018086,
                                                31,
                                                true
                                            ]
                                        }
                                    },
                                    "length": 1
                                },
                                "context": {
                                    "sizzle1496076078203": {
                                        "parentNode": [
                                            163138.54949018086,
                                            31,
                                            true
                                        ]
                                    }
                                },
                                "selector": ".red-ui-editableList-item-content .node-input-evts-payload option:selected"
                            },
                            "context": {
                                "sizzle1496076078203": {
                                    "parentNode": [
                                        163138.54949018086,
                                        31,
                                        true
                                    ]
                                }
                            }
                        },
                        "context": {
                            "sizzle1496076078203": {
                                "parentNode": [
                                    163138.54949018086,
                                    31,
                                    true
                                ]
                            }
                        }
                    }
                }
            },
            {
                "guid": "db8c816b19bb",
                "name": "getDesiredTemperature"
            },
            {
                "guid": "8c11465b27e5",
                "name": "getLocation",
                "payload": {
                    "properties": {
                        "0": "be6df8b37d4d",
                        "1": "4a3d9962af3e",
                        "2": "714289994d5d",
                        "length": 3,
                        "prevObject": {
                            "0": "be6df8b37d4d",
                            "1": "4a3d9962af3e",
                            "2": "714289994d5d",
                            "length": 3,
                            "prevObject": {
                                "0": {},
                                "1": {},
                                "2": {},
                                "length": 3,
                                "prevObject": {
                                    "0": {
                                        "sizzle1496076078203": {
                                            "parentNode": [
                                                164455,
                                                63,
                                                true
                                            ]
                                        }
                                    },
                                    "selector": ".red-ui-editableList-item-content",
                                    "context": {
                                        "sizzle1496076078203": {
                                            "parentNode": [
                                                163138.54949018086,
                                                31,
                                                true
                                            ]
                                        }
                                    },
                                    "length": 1
                                },
                                "context": {
                                    "sizzle1496076078203": {
                                        "parentNode": [
                                            163138.54949018086,
                                            31,
                                            true
                                        ]
                                    }
                                },
                                "selector": ".red-ui-editableList-item-content .node-input-evts-payload option:selected"
                            },
                            "context": {
                                "sizzle1496076078203": {
                                    "parentNode": [
                                        163138.54949018086,
                                        31,
                                        true
                                    ]
                                }
                            }
                        },
                        "context": {
                            "sizzle1496076078203": {
                                "parentNode": [
                                    163138.54949018086,
                                    31,
                                    true
                                ]
                            }
                        }
                    }
                }
            },
            {
                "guid": "3c35cd507eb1",
                "name": "getData",
                "payload": {
                    "properties": {
                        "0": "6f2a07396cd9",
                        "1": "d4635e2ba240",
                        "2": "c8b7ed48f1b0",
                        "3": "9a4d1de08a11",
                        "length": 4,
                        "prevObject": {
                            "0": "6f2a07396cd9",
                            "1": "d4635e2ba240",
                            "2": "c8b7ed48f1b0",
                            "3": "9a4d1de08a11",
                            "length": 4,
                            "prevObject": {
                                "0": {},
                                "1": {},
                                "2": {},
                                "3": {},
                                "length": 4,
                                "prevObject": {
                                    "0": {
                                        "sizzle1496076078203": {
                                            "parentNode": [
                                                164456,
                                                63,
                                                true
                                            ]
                                        }
                                    },
                                    "selector": ".red-ui-editableList-item-content",
                                    "context": {
                                        "sizzle1496076078203": {
                                            "parentNode": [
                                                163138.54949018086,
                                                31,
                                                true
                                            ]
                                        }
                                    },
                                    "length": 1
                                },
                                "context": {
                                    "sizzle1496076078203": {
                                        "parentNode": [
                                            163138.54949018086,
                                            31,
                                            true
                                        ]
                                    }
                                },
                                "selector": ".red-ui-editableList-item-content .node-input-evts-payload option:selected"
                            },
                            "context": {
                                "sizzle1496076078203": {
                                    "parentNode": [
                                        163138.54949018086,
                                        31,
                                        true
                                    ]
                                }
                            }
                        },
                        "context": {
                            "sizzle1496076078203": {
                                "parentNode": [
                                    163138.54949018086,
                                    31,
                                    true
                                ]
                            }
                        }
                    }
                }
            }
        ]
    },
    {
        "id": "3f2340dd.4e5f5",
        "type": "ui_tab",
        "z": "",
        "name": "Status ",
        "icon": "dashboard",
        "order": 2
    },
    {
        "id": "1b4a11b1.5d4f7e",
        "type": "ui_group",
        "z": "",
        "name": "Map",
        "tab": "46c76436.19c914",
        "order": 4,
        "disp": true,
        "width": "12"
    },
    {
        "id": "777ba375.cceed4",
        "type": "ui_group",
        "z": "",
        "name": "Status",
        "tab": "3f2340dd.4e5f5",
        "order": 4,
        "disp": true,
        "width": "6"
    },
    {
        "id": "91e15d00.6686",
        "type": "ui_base",
        "theme": {
            "name": "theme-custom",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "Helvetica Neue",
                "edited": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "Helvetica Neue",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "IBM",
                "default": "#4B7930",
                "baseColor": "#00007F",
                "baseFont": "Helvetica Neue",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#000000",
                    "edited": true
                },
                "page-backgroundColor": {
                    "value": "#000000",
                    "edited": true
                },
                "page-sidebar-backgroundColor": {
                    "value": "#000000",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#FFF",
                    "edited": true
                },
                "group-borderColor": {
                    "value": "#222",
                    "edited": true
                },
                "group-backgroundColor": {
                    "value": "#000",
                    "edited": true
                },
                "widget-textColor": {
                    "value": "#FFF",
                    "edited": true
                },
                "widget-backgroundColor": {
                    "value": "#00007F",
                    "edited": true
                },
                "widget-borderColor": {
                    "value": "#000000",
                    "edited": true
                }
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "true",
            "allowSwipe": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "645f040.2abc77c",
        "type": "ui_group",
        "z": "",
        "name": "Anomaly Function Level Report Test",
        "tab": "",
        "order": 1,
        "disp": true,
        "width": "6"
    },
    {
        "id": "22d55ba4.eca9b4",
        "type": "ui_group",
        "z": "",
        "name": "Anomaly Function Level Report ",
        "tab": "5f93e656.566e28",
        "order": 2,
        "disp": true,
        "width": "24"
    },
    {
        "id": "5f93e656.566e28",
        "type": "ui_tab",
        "z": "",
        "name": "Anomaly Function Level Report",
        "icon": "dashboard",
        "order": 4
    },
    {
        "id": "3f9c05c6.945762",
        "type": "ui_group",
        "z": "",
        "name": "Header",
        "tab": "c42d9a6b.48aeb",
        "order": 1,
        "disp": false,
        "width": "24"
    },
    {
        "id": "3cf00a69.155a0e",
        "type": "ui_group",
        "z": "",
        "name": "Footer",
        "tab": "3f2340dd.4e5f5",
        "order": 5,
        "disp": false,
        "width": "24"
    },
    {
        "id": "6984f9fd.396778",
        "type": "ui_group",
        "z": "",
        "name": "Footer",
        "tab": null,
        "order": 3,
        "disp": false,
        "width": "20"
    },
    {
        "id": "1d53a3ea.600b7c",
        "type": "ui_group",
        "z": "",
        "name": "Header",
        "tab": "3f2340dd.4e5f5",
        "order": 1,
        "disp": false,
        "width": "24"
    },
    {
        "id": "c42d9a6b.48aeb",
        "type": "ui_tab",
        "z": "",
        "name": "Car Simulation",
        "icon": "dashboard",
        "order": 1
    },
    {
        "id": "32923f6a.2dd278",
        "type": "ui_group",
        "z": "",
        "name": "Footer",
        "tab": "c42d9a6b.48aeb",
        "order": 3,
        "disp": false,
        "width": "24"
    },
    {
        "id": "80d8c020.63875",
        "type": "ui_group",
        "z": "",
        "name": "Monitoring",
        "tab": "3f2340dd.4e5f5",
        "order": 3,
        "disp": true,
        "width": "6"
    },
    {
        "id": "9099ebb9.e98548",
        "type": "ui_group",
        "z": "",
        "name": "Footer",
        "tab": "5f93e656.566e28",
        "order": 3,
        "disp": false,
        "width": "24"
    },
    {
        "id": "b071f23d.e04f48",
        "type": "ui_group",
        "z": "",
        "name": "Header",
        "tab": "5f93e656.566e28",
        "order": 1,
        "disp": false,
        "width": "24"
    },
    {
        "id": "46c76436.19c914",
        "type": "ui_tab",
        "z": "",
        "name": "Location",
        "icon": "dashboard",
        "order": 3
    },
    {
        "id": "cd0101a7.7e2e2",
        "type": "ui_group",
        "z": "",
        "name": "Location",
        "tab": "46c76436.19c914",
        "order": 2,
        "disp": true,
        "width": "6"
    },
    {
        "id": "54bbfda5.3d125c",
        "type": "ui_tab",
        "z": "",
        "name": "Alert Configuration",
        "icon": "dashboard",
        "order": 5
    },
    {
        "id": "18e55744.d1d561",
        "type": "ui_group",
        "z": "",
        "name": "Alert Configuration",
        "tab": "54bbfda5.3d125c",
        "order": 1,
        "disp": true,
        "width": "8"
    },
    {
        "id": "9d1d57e8.0af4e",
        "type": "ui_group",
        "z": "",
        "name": "Weather",
        "tab": "46c76436.19c914",
        "order": 5,
        "disp": true,
        "width": "6"
    },
    {
        "id": "66f44f97.7327f8",
        "type": "ui_group",
        "z": "",
        "name": "Header",
        "tab": "46c76436.19c914",
        "order": 1,
        "disp": false,
        "width": "24"
    },
    {
        "id": "30859307.cd8a94",
        "type": "ui_group",
        "z": "",
        "name": "Footer",
        "tab": "46c76436.19c914",
        "order": 7,
        "disp": false,
        "width": "24"
    },
    {
        "id": "59411d37.e2ccbc",
        "type": "cloudant",
        "z": "97ea1ba1.9cee7",
        "host": "https://60e6399c-2278-4b67-b6e6-dcb75924dd4f-bluemix:666db1c15b79d1a4900fb59d83d46f4a8685b44cd0a0fcdfdf9879c9579f455f@60e6399c-2278-4b67-b6e6-dcb75924dd4f-bluemix.cloudant.com",
        "name": "db"
    },
    {
        "id": "b30eebfe.f2c488",
        "type": "ui_group",
        "z": "5aba5c1a.28fe7c",
        "name": "Car Simulation",
        "tab": "c42d9a6b.48aeb",
        "order": 2,
        "disp": false,
        "width": "24"
    },
    {
        "id": "dfd517f9.53b968",
        "type": "ui_group",
        "z": "d574f97d.4d29a8",
        "name": "Alert Configuration",
        "tab": "",
        "order": 1,
        "disp": true,
        "width": "8"
    },
    {
        "id": "7ac89b6.7f78f64",
        "type": "ui_group",
        "z": "",
        "name": "Orig Dest",
        "tab": "46c76436.19c914",
        "order": 6,
        "disp": true,
        "width": "6"
    },
    {
        "id": "d63ebccc.9e2da8",
        "type": "ui_group",
        "z": "",
        "name": "Select",
        "tab": "46c76436.19c914",
        "order": 3,
        "disp": true,
        "width": "6"
    },
    {
        "id": "a9a678bc.1cb0d",
        "type": "ui_group",
        "z": "",
        "name": "Location",
        "tab": "",
        "order": 1,
        "disp": true,
        "width": "6"
    },
    {
        "id": "9cbccace.0f0a48",
        "type": "ui_group",
        "z": "",
        "name": "Map",
        "tab": "",
        "order": 2,
        "disp": false,
        "width": "12"
    },
    {
        "id": "9b297a5.c044c88",
        "type": "switch",
        "z": "90969cec.056bc",
        "name": "AlarmConditionCheck",
        "property": "payload.data",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "CutOutTemperature",
                "vt": "global"
            },
            {
                "t": "lt",
                "v": "CutInTemperature",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 547,
        "y": 110,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "9046cf9d.d6a83",
        "type": "function",
        "z": "90969cec.056bc",
        "name": "SetDefaultNormalTemperatures",
        "func": "if(!context.global.hasOwnProperty(\"CutOutTemperature\"))\n    context.global.CutOutTemperature=20;\nif(!context.global.hasOwnProperty(\"CutInTemperature\"))\n    context.global.CutInTemperature=10;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 253,
        "y": 109,
        "wires": [
            [
                "9b297a5.c044c88",
                "56b00584.5a325c"
            ]
        ]
    },
    {
        "id": "56b00584.5a325c",
        "type": "switch",
        "z": "90969cec.056bc",
        "name": "GreaterThanCutInTemperature",
        "property": "payload.data",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "CutInTemperature",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "outputs": 1,
        "x": 576,
        "y": 195,
        "wires": [
            [
                "99a63c4e.17e72"
            ]
        ]
    },
    {
        "id": "99a63c4e.17e72",
        "type": "switch",
        "z": "90969cec.056bc",
        "name": "LessThanCutOutTemperature",
        "property": "payload.data",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "CutOutTemperature",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "outputs": 1,
        "x": 863,
        "y": 195,
        "wires": [
            []
        ]
    },
    {
        "id": "2976a33.c57b15c",
        "type": "comment",
        "z": "90969cec.056bc",
        "name": "Alert Condition Check",
        "info": "",
        "x": 544,
        "y": 158,
        "wires": []
    },
    {
        "id": "40170ae5.93a60c",
        "type": "comment",
        "z": "90969cec.056bc",
        "name": "Alarm Condition Check",
        "info": "Alarms and Alerts are raised as per the value\nof the current temperature .They are influenced \nby fllowing parameters.\n1.CutIn Temperature.\n2.CutOut temperature.\n\nIf temperature is lower than CutIn temperature \nand higher than CutOut temperature Alarms\nwill be raised .\n\nIf temperature is between CutIn and CutOut \ntemperature Alerts will be raised",
        "x": 119,
        "y": 51,
        "wires": []
    },
    {
        "id": "1ef1baa5.1d3685",
        "type": "function",
        "z": "175817de.c3752",
        "name": "CofiugureEmailID",
        "func": "if(context.global.hasOwnProperty(\"email\"))\n    msg.to=context.global.email;\nelse{\n    //This is a dummy email id\n    context.global.email=\"monitoringserviceengineer@yourorg.com\";\n    msg.to=context.global.email;\n}\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 225.44444274902344,
        "y": 98.11110305786133,
        "wires": [
            [
                "1a9ad890.d76adf"
            ]
        ]
    },
    {
        "id": "692769ad.52fd",
        "type": "e-mail",
        "z": "175817de.c3752",
        "server": "smtp.gmail.com",
        "port": "465",
        "name": "",
        "dname": "ServiceEngineerAlert",
        "x": 933.3333206176758,
        "y": 92.11112213134766,
        "wires": []
    },
    {
        "id": "9de9fa83.64a968",
        "type": "switch",
        "z": "175817de.c3752",
        "name": "AlertNecessityCheck",
        "property": "data",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 695,
        "y": 98.22221946716309,
        "wires": [
            [
                "692769ad.52fd"
            ],
            []
        ]
    },
    {
        "id": "1a9ad890.d76adf",
        "type": "function",
        "z": "175817de.c3752",
        "name": "AlertFrequencyCheck",
        "func": "\n\nif(context.global.hasOwnProperty(\"LastMessageTime\")){\n    var now = ( new Date() ).getTime();\n    var lastMessageTime=context.global.LastMessageTime;\n    var alertFrequencyChange=context.global.alertFrequencyChange;\n    if ((now-lastMessageTime)/1000 >alertFrequencyChange)\n    context.global.NeedFlow=1;\n    else\n     context.global.NeedFlow=0;\n context.global.LastMessageTime=now;\n}else\n{\n    context.global.NeedFlow=1;\n    var now = ( new Date() ).getTime();\n    context.global.LastMessageTime=now;\n}\nmsg.data=context.global.NeedFlow;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 460.27779388427734,
        "y": 97.91669845581055,
        "wires": [
            [
                "9de9fa83.64a968"
            ]
        ]
    },
    {
        "id": "bcee61ca.2e432",
        "type": "comment",
        "z": "175817de.c3752",
        "name": "Service Engineer Notification",
        "info": "Sends Email as notification in case of Alram situation.",
        "x": 140,
        "y": 43,
        "wires": []
    },
    {
        "id": "997b19ec.696f7",
        "type": "function",
        "z": "5514de4c.7fdd7",
        "name": "Generate variables",
        "func": "var hex = \"0x\";    \nfor (var i = 1; i <= 8; ++i) {\n    hex += Math.floor(Math.random() * 16).toString(16).toUpperCase();\n}\n\nvar manufacturers = ['BOSCH','CONTI','DELPHI'];\nvar manufacturer = manufacturers[Math.floor(Math.random() * manufacturers.length)];\nvar reasons = [\n    \"WDR caused by DIV by zero\",\n    \"Buffer overflow\",\n    \"Updated failed due to stack overflow\",\n    \"WDR by return from LIBC\"\n]\nvar reason = reasons[Math.floor(Math.random() * reasons.length)];\n\nmsg.payload = {\n    addr: hex,\n    manufacturer: manufacturer,\n    reason: reason,\n    codedBy: manufacturer == 'BOSCH' ? 'ETAS' : ''\n}\n\nreturn msg;",
        "outputs": "1",
        "noerr": 0,
        "x": 510,
        "y": 640,
        "wires": [
            [
                "485d7432.279c7c"
            ]
        ]
    },
    {
        "id": "485d7432.279c7c",
        "type": "data-generator",
        "z": "5514de4c.7fdd7",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "syntax": "json",
        "template": "{\n    \"sw\": \"{{float 0 20 '0.00'}}\",\n    \"hw\": \"{{float 0 20 '0.00'}}\",\n    \"ts\": \"{{date '2017-02-01T09:00' '2017-04-03T17:30' 'YY-MM-DD HH:mm:ss'}}\",\n    \"addr\": \"{{payload.addr}}\",\n    \"reason\": \"{{payload.reason}}\",\n    \"manufacturer\": \"{{payload.manufacturer}}\",\n    \"codedBy\": \"{{payload.codedBy}}\"\n}",
        "x": 720,
        "y": 640,
        "wires": [
            [
                "dc8424da.aaed"
            ]
        ]
    },
    {
        "id": "dc8424da.aaed",
        "type": "function",
        "z": "5514de4c.7fdd7",
        "name": "Add to tickets",
        "func": "if (!msg.tickets) {\n    msg.tickets = [];\n}\nmsg.tickets.push(msg.payload);\nreturn msg;",
        "outputs": "1",
        "noerr": 0,
        "x": 920,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "32e6d3ee.5289d4",
        "type": "start virtual device",
        "z": "efbe0ac4.93412",
        "name": "",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "outputs": 1,
        "x": 250,
        "y": 140,
        "wires": [
            [
                "7187d5de.cccee4",
                "a20130f7.1a4e8",
                "a06356cc.a200c8"
            ]
        ]
    },
    {
        "id": "7187d5de.cccee4",
        "type": "device function",
        "z": "efbe0ac4.93412",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "name": "Change actual parameters",
        "func": "EngineTemperature = Math.floor(Math.random() * 20 + 56);\nFuelLevel = FuelLevel <= 0 ? Math.random() * 100 : FuelLevel - Math.random();\nCurrentSpeed = Math.floor(Math.random() * 30 + 90);\nPowerConsumption = Math.floor(Math.random() * 20 + 40);\n\n/*\nif (!msg.count && msg.count !== 0) {\n    msg.count = 0;\n}\n\nelse if (msg.count == 525) {\n    msg.count = 0;\n}\n\nelse {\n    ++msg.count;\n}\n\nvar loc = flow.get(\"track\")[msg.count];\n*/\n\n/*\nvar hex = \"\";\nvar i;\nfor (i = 1; i <= 8; ++i) {\n    hex += Math.floor(Math.random() * 16).toString(16).toUpperCase();\n}\n\nStackOverflowProbability = hex;\n*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 140,
        "wires": [
            [
                "c3825c22.c0abf"
            ]
        ]
    },
    {
        "id": "2572ce0c.afdb0a",
        "type": "delay",
        "z": "efbe0ac4.93412",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 220,
        "y": 300,
        "wires": [
            [
                "8f3d4a02.0429f8",
                "7187d5de.cccee4",
                "2b0f92fa.a93b9e"
            ]
        ]
    },
    {
        "id": "c5c94717.42579",
        "type": "function",
        "z": "5aba5c1a.28fe7c",
        "name": "update flow context with device changes",
        "func": "var simulation = flow.get(\"simulation\") || {};\nswitch (msg.topic) {\ncase \"deviceSchema\":\n\tif(Array.isArray(msg.payload)){\n\t\t//all schemas update on startup clean old context \n\t\tsimulation = {};\n\t}\n\telse{//single schema update while running\n\t\tmsg.payload = [msg.payload];\n\n\t}\n\t//update schemas\n\tfor (var i = 0; i < msg.payload.length; i++) {\n\t\tvar schema = msg.payload[i];\n\t\tsimulation[schema.deviceType] = {schema: schema, devices: {}};\n\t}\n\tbreak;\ncase \"deviceCreated\":\n\tvar device = {properties: msg.payload.properties, isOn: true};\n\t//set properties input types\n\tdevice.propertiesInput = {};\n\tfor(var k in device.properties){\n\t\tvar prpType = typeof(device.properties[k]);\n\t\tvar inputType = (prpType === \"number\") ? \"number\": (prpType === \"boolean\") ? \"checkbox\" : \"text\";\n\t\tdevice.propertiesInput[k] = inputType;\n\t}\n\tsimulation[msg.payload.deviceType].devices[msg.payload.deviceId] = device;\n\tbreak;\ncase \"deviceDeleted\":\n\tvar device = msg.payload;\n\tif(simulation[device.deviceType].devices[device.deviceId]){\n\t\tsimulation[device.deviceType].devices[device.deviceId].isOn = false;\n\t}\n\telse\n\t\treturn null; //device already deleted\n\tbreak;\ncase \"propertyChange\":\n\tvar device = msg.payload;\n\tvar changedProperty = device.changedProperty;\n\tsimulation[device.deviceType].devices[device.deviceId].properties[changedProperty.name] = changedProperty.newValue;\n\tbreak;\ndefault:\n\treturn null;\n}\nflow.set(\"simulation\", simulation);\nmsg.payload = simulation;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 440,
        "y": 680,
        "wires": [
            [
                "d8e79814.9912b"
            ]
        ]
    },
    {
        "id": "9af3c101.2b4408",
        "type": "switch",
        "z": "5aba5c1a.28fe7c",
        "name": "Switch cmd",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "createDevice",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "deleteDevice",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "startDevice",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "stopDevice",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "changeProperty",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "viewDevice",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "viewLocation",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "outputs": 7,
        "x": 470,
        "y": 140,
        "wires": [
            [
                "758ba1ba.af46c8"
            ],
            [
                "ab6e0964.90e1e8"
            ],
            [
                "d37c931c.0372f"
            ],
            [
                "d37c931c.0372f"
            ],
            [
                "1a50aed9.ba7ec9"
            ],
            [
                "f3e6df1c.6177d8"
            ],
            [
                "f3e6df1c.6177d8"
            ]
        ]
    },
    {
        "id": "2a9439c9.dfb50e",
        "type": "function",
        "z": "5aba5c1a.28fe7c",
        "name": "Generate ID",
        "func": "var msgs = []\nfor(var i = 0; i < msg.payload.instances; i++){\n    var mac = Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16) +\n    Math.floor(Math.random() * 16).toString(16);\n    var macStr = mac[0].toUpperCase() + mac[1].toUpperCase() + mac[2].toUpperCase() + mac[3].toUpperCase() +\n    mac[4].toUpperCase() + mac[5].toUpperCase() + mac[6].toUpperCase() + mac[7].toUpperCase() +\n    mac[8].toUpperCase() + mac[9].toUpperCase() + mac[10].toUpperCase() + mac[11].toUpperCase();\n    msgs.push({deviceId: macStr, typeId: msg.payload.deviceType, deviceInfo: {descriptiveLocation: \"Car \" + (i + 1) }});\n}\nmsg.payload =msgs\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 363.0713195800781,
        "y": 341.0000305175781,
        "wires": [
            [
                "25fb985.fa53a68",
                "f4865741.c85418"
            ]
        ]
    },
    {
        "id": "12756c96.ee1a5b",
        "type": "function",
        "z": "5aba5c1a.28fe7c",
        "name": "Add Device to flow context",
        "func": "if(msg.payload === null) return null;\n\nvar simulation = flow.get(\"simulation\") || {};\nvar newDevices = [];\nvar turnOnMsgs = [];\nfor(var i = 0; i < msg.payload.length; i++){\n    var resp = msg.payload[i];\n    if(!resp.deviceId){\n        node.error(\"error on register device\");\n    }\n    else{\n         var deviceId = resp.deviceId;\n         var deviceType = resp.typeId;\n         if(simulation[deviceType]){\n            simulation[deviceType].devices[deviceId] = {properties: {}, isOn: false};\n            newDevices.push({typeId: deviceType, deviceId: deviceId});\n            turnOnMsgs.push({payload: {deviceType: deviceType, deviceId: deviceId}});\n         }\n    }\n}\n\nflow.set(\"simulation\", simulation);\n//check if need to push changes to db\nmsg.payload = simulation; //message to the ui\nif(msg.updatedb !== false && newDevices.length > 0){\n    var pendingUpdates = flow.get(\"dbUpdates\") || {addDevices: [],deleteDevices: []};\n\tpendingUpdates.addDevices = pendingUpdates.addDevices.concat(newDevices);\n\tflow.set(\"dbUpdates\", pendingUpdates);\n}\nreturn [msg, turnOnMsgs];\n",
        "outputs": "2",
        "noerr": 0,
        "x": 800,
        "y": 340,
        "wires": [
            [
                "462de07e.fbc578"
            ],
            [
                "997275e5.5c1c5"
            ]
        ]
    },
    {
        "id": "c42910e6.1e6868",
        "type": "function",
        "z": "5aba5c1a.28fe7c",
        "name": "Delete Device from flow context",
        "func": "var simulation = flow.get(\"simulation\") || {};\nvar deviceId = msg.payload.deviceId;\nvar deviceType = msg.payload.deviceType;\ndelete simulation[deviceType].devices[deviceId];\nflow.set(\"simulation\", simulation);\nvar uiMsg = {payload: simulation};\nvar closeDeviceMsg = {payload: {deviceType: deviceType, deviceId: deviceId}};\n\nif(msg.updatedb !== false){\n    var pendingUpdates = flow.get(\"dbUpdates\") || {addDevices: [],deleteDevices: []};\n\tpendingUpdates.deleteDevices.push({typeId: deviceType, deviceId: deviceId});\n\tflow.set(\"dbUpdates\", pendingUpdates);\n}\n\nreturn [closeDeviceMsg,uiMsg];",
        "outputs": "2",
        "noerr": 0,
        "x": 330,
        "y": 500,
        "wires": [
            [
                "f0576aa0.6630f8",
                "fe220d7b.ef7b7"
            ],
            [
                "7c33013e.100c18"
            ]
        ]
    },
    {
        "id": "7a579564.379394",
        "type": "link in",
        "z": "5aba5c1a.28fe7c",
        "name": "Simulation Dashboard Input",
        "links": [
            "462de07e.fbc578",
            "7c33013e.100c18",
            "d8e79814.9912b"
        ],
        "x": 55,
        "y": 140,
        "wires": [
            [
                "bd64b82e.c9fff",
                "91f943ac.8c9c3"
            ]
        ]
    },
    {
        "id": "462de07e.fbc578",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "Simulation Dashboard Outlink",
        "links": [
            "7a579564.379394"
        ],
        "x": 975,
        "y": 340,
        "wires": []
    },
    {
        "id": "1a50aed9.ba7ec9",
        "type": "set properties",
        "z": "5aba5c1a.28fe7c",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "name": "",
        "propAll": true,
        "valueType": "msg",
        "value": "",
        "x": 760,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "14b3a0c1.9d7be7",
        "type": "device listener",
        "z": "5aba5c1a.28fe7c",
        "monitor": "stop",
        "monitorAll": true,
        "deviceId": "",
        "allDeviceIds": true,
        "allSchemas": true,
        "allProps": true,
        "schema": "b561db29.33fd2",
        "props": [],
        "name": "",
        "x": 120,
        "y": 680,
        "wires": [
            [
                "c5c94717.42579"
            ]
        ]
    },
    {
        "id": "758ba1ba.af46c8",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "Register Device -  out",
        "links": [
            "824352e5.36814"
        ],
        "x": 675,
        "y": 60,
        "wires": []
    },
    {
        "id": "113cdf2.1680fa1",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Register Device",
        "info": "",
        "x": 780,
        "y": 60,
        "wires": []
    },
    {
        "id": "ab6e0964.90e1e8",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "Unregister Device out",
        "links": [
            "474514b0.744f24"
        ],
        "x": 675,
        "y": 100,
        "wires": []
    },
    {
        "id": "b1eab705.3b65e",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Unregister Device",
        "info": "",
        "x": 790,
        "y": 100,
        "wires": []
    },
    {
        "id": "b767cf22.48fd78",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Register Device",
        "info": "",
        "x": 120,
        "y": 240,
        "wires": []
    },
    {
        "id": "824352e5.36814",
        "type": "link in",
        "z": "5aba5c1a.28fe7c",
        "name": "Registing device - in",
        "links": [
            "758ba1ba.af46c8"
        ],
        "x": 55,
        "y": 280,
        "wires": [
            [
                "695a6785.da1fb8",
                "9c98409e.de6d58"
            ]
        ]
    },
    {
        "id": "345bdf92.c1d9b",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Unregister Device",
        "info": "",
        "x": 130.2698211669922,
        "y": 464.55555152893066,
        "wires": []
    },
    {
        "id": "474514b0.744f24",
        "type": "link in",
        "z": "5aba5c1a.28fe7c",
        "name": "Unregister Device - in",
        "links": [
            "ab6e0964.90e1e8"
        ],
        "x": 55,
        "y": 500,
        "wires": [
            [
                "c42910e6.1e6868",
                "93a7e1cc.b89da"
            ]
        ]
    },
    {
        "id": "1d37cc03.bddd2c",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Dashboard Input",
        "info": "",
        "x": 1072.0953559875488,
        "y": 336.0951290130615,
        "wires": []
    },
    {
        "id": "2de2371c.7af268",
        "type": "function",
        "z": "5aba5c1a.28fe7c",
        "name": "start DB update",
        "func": "var pendingUpdates = flow.get(\"dbUpdates\");\nif(!pendingUpdates || (pendingUpdates.addDevices.length === 0 && pendingUpdates.deleteDevices.length === 0)  ) \nreturn [msg,null];\n//load changes on msg\nmsg.addDevices = pendingUpdates.addDevices;\nmsg.deleteDevices = pendingUpdates.deleteDevices;\n//set doc id\nmsg.payload =  {_id: \"registeredDevices\"}\n\n//rest flow pending changes\npendingUpdates.addDevices = [];\npendingUpdates.deleteDevices = [];\nflow.set(\"dbUpdates\",pendingUpdates);\nreturn [msg,msg];",
        "outputs": "2",
        "noerr": 0,
        "x": 342.1429443359375,
        "y": 935.8572387695312,
        "wires": [
            [
                "de28195b.0bcf88"
            ],
            [
                "14c6dbd4.0d07f4"
            ]
        ]
    },
    {
        "id": "14c6dbd4.0d07f4",
        "type": "cloudant in",
        "z": "5aba5c1a.28fe7c",
        "name": "Get reg devices from db",
        "cloudant": "",
        "database": "redsimulation-db",
        "service": "simulated-cars-cloudantNoSQLDB",
        "search": "_id_",
        "design": "",
        "index": "",
        "x": 578.3651733398438,
        "y": 941.8572378158569,
        "wires": [
            [
                "7875380d.c00d9"
            ]
        ]
    },
    {
        "id": "78f74ca1.905804",
        "type": "cloudant out",
        "z": "5aba5c1a.28fe7c",
        "name": "Update reg devices in db",
        "cloudant": "",
        "database": "redsimulation-db",
        "service": "simulated-cars-cloudantNoSQLDB",
        "payonly": true,
        "operation": "insert",
        "x": 1053.3651733398438,
        "y": 941.8572378158569,
        "wires": []
    },
    {
        "id": "59be868f.595b",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "On Device Change",
        "info": "",
        "x": 128.60321044921875,
        "y": 627.507926940918,
        "wires": []
    },
    {
        "id": "30757986.f2ee3e",
        "type": "inject",
        "z": "5aba5c1a.28fe7c",
        "name": "Start db sync",
        "topic": "",
        "payload": "{\"_id\": \"registeredDevices\"}",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 151.1429443359375,
        "y": 804.8572387695312,
        "wires": [
            [
                "de28195b.0bcf88",
                "92f2aab.d4b16d8"
            ]
        ]
    },
    {
        "id": "12a1869d.5beff1",
        "type": "cloudant in",
        "z": "5aba5c1a.28fe7c",
        "name": "Get reg devices from db",
        "cloudant": "",
        "database": "redsimulation-db",
        "service": "simulated-cars-cloudantNoSQLDB",
        "search": "_id_",
        "design": "",
        "index": "",
        "x": 537.1429443359375,
        "y": 804.8572387695312,
        "wires": [
            [
                "a2c6a97f.bb9aa"
            ]
        ]
    },
    {
        "id": "a2c6a97f.bb9aa",
        "type": "change",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.devices",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "updatedb",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 757.6429443359375,
        "y": 804.8572387695312,
        "wires": [
            [
                "1b9a5d79.60d0e3"
            ]
        ]
    },
    {
        "id": "de28195b.0bcf88",
        "type": "delay",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 337.6429443359375,
        "y": 861.8572387695312,
        "wires": [
            [
                "2de2371c.7af268"
            ]
        ]
    },
    {
        "id": "7875380d.c00d9",
        "type": "function",
        "z": "5aba5c1a.28fe7c",
        "name": "write devices to db",
        "func": "var doc = msg.payload || {_id: \"registeredDevices\", devices: []};\nif(msg.addDevices){\n\tdoc.devices = doc.devices.concat(msg.addDevices);\n}\n\nfunction findIndex(array, func){\n    for(var i = 0; i < array.length; i++){\n        var item = array[i];\n        if(func(item) === true){\n            return i;\n        }\n    }\n    return -1;\n}\nif(msg.deleteDevices){  \n\tfor (var i = 0; i < msg.deleteDevices.length; i++) {\n\t\tvar deviceType = msg.deleteDevices[i].deviceType;\n\t\tvar deviceId = msg.deleteDevices[i].deviceId;\n\t\tvar index = findIndex(doc.devices,function(item){return item.deviceId === deviceId;});\n\t\tif(index !== -1){\n\t\t    doc.devices.splice(index, 1);\n\t\t}\n\t}\n}\nmsg.payload = doc;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 814.8651733398438,
        "y": 941.8572378158569,
        "wires": [
            [
                "78f74ca1.905804"
            ]
        ]
    },
    {
        "id": "92f2aab.d4b16d8",
        "type": "delay",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 334.1429443359375,
        "y": 804.8572387695312,
        "wires": [
            [
                "12a1869d.5beff1"
            ]
        ]
    },
    {
        "id": "9b2f19fb.77b4f8",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "README",
        "info": "This flow implements an out of the box, generic\ndevice simulator, that can create, monitor \nand control virtual/simulated devices, whose behaviors\nare described as Node-RED flows using the Virtual_IoT_Device\nnode types.\n\n__There is no need to modify this flow in order to create and \nemulate virtual devices__\n\n## Connecting the simulator to device behavior flows\nTo connect a virtual device to the simulation dashboard, you need to connect the *__StartDevice__* and  *__StopDevice__* output links in the simulator flow to \nthe *__start virtual device__* and *__stop virtual device__* nodes in the device behavior flow (respectively)\n\n## Using the dashboard UI\nThe dashboard UI is part of the Node-RED application dashboard \nwhich is in _[application URL]/ui_.\nAfter opening the dashboard, select the _Simulation_ \npage (top left menu/side bar) to view the virtual devices dashboard.\nYou can create/delete multiple instances for every \ndevice type as well as view/change their property values.\nThe devices are auto generated in the IoT Platform using IDs \ngenerated by the dashboard. \n\n### Note:\nThe flow relies on the the CloudantNoSQL DB Service (deployed by default) to persist device instances between simulation sessions.\n\n\n\n",
        "x": 100,
        "y": 100,
        "wires": []
    },
    {
        "id": "23d95d26.e2b4da",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Save registered devices to DB",
        "info": "",
        "x": 164.21441650390625,
        "y": 764.8572387695312,
        "wires": []
    },
    {
        "id": "93a7e1cc.b89da",
        "type": "device-manager",
        "z": "5aba5c1a.28fe7c",
        "auth": "bluemix",
        "name": "Delete Device",
        "apiKey": "",
        "deviceType": "Car",
        "method": "Delete",
        "deviceId": "",
        "password": "",
        "ignore": true,
        "x": 280,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "25fb985.fa53a68",
        "type": "device-manager",
        "z": "5aba5c1a.28fe7c",
        "auth": "bluemix",
        "name": "Register Device",
        "apiKey": "",
        "deviceType": "",
        "method": "Create",
        "deviceId": "",
        "password": "",
        "ignore": true,
        "x": 540,
        "y": 340,
        "wires": [
            [
                "12756c96.ee1a5b",
                "1b56af72.487fb1"
            ]
        ]
    },
    {
        "id": "8699df68.c408e8",
        "type": "link in",
        "z": "efbe0ac4.93412",
        "name": "Start Thermostat",
        "links": [
            "b6b5cf30.845488"
        ],
        "x": 115,
        "y": 140,
        "wires": [
            [
                "32e6d3ee.5289d4"
            ]
        ]
    },
    {
        "id": "d273e0e6.3bf6e",
        "type": "stop virtual device",
        "z": "efbe0ac4.93412",
        "name": "",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "x": 270,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "b60b420e.e88d08",
        "type": "link in",
        "z": "efbe0ac4.93412",
        "name": "Stop Thermostat",
        "links": [
            "5d77d015.3e005"
        ],
        "x": 120.15869140625,
        "y": 519.9285202026367,
        "wires": [
            [
                "d273e0e6.3bf6e"
            ]
        ]
    },
    {
        "id": "49f28353.3a8f7c",
        "type": "ibmiot out",
        "z": "efbe0ac4.93412",
        "authentication": "boundService",
        "apiKey": "",
        "outputType": "evt",
        "deviceId": "thermostat1",
        "deviceType": "Car",
        "eventCommandType": "thermostatEvent",
        "format": "json",
        "data": "some",
        "qos": 0,
        "name": "IBM IoT",
        "service": "registered",
        "x": 1300,
        "y": 300,
        "wires": []
    },
    {
        "id": "9c98409e.de6d58",
        "type": "device-type-manager",
        "z": "5aba5c1a.28fe7c",
        "auth": "bluemix",
        "name": "",
        "apiKey": "",
        "deviceType": "",
        "classId": "Gateway",
        "method": "Create",
        "deviceTypeId": "",
        "serialNumber": "",
        "manufacturer": "",
        "model": "",
        "deviceClass": "",
        "infoDescription": "",
        "firmwareVersion": "",
        "hardwareVersion": "",
        "descriptiveLocation": "",
        "metadata": "{\"parts\":2222}",
        "password": "",
        "properties": [
            {
                "key": "metadata",
                "value": "{\"key\":1}"
            }
        ],
        "ignore": true,
        "x": 240,
        "y": 280,
        "wires": [
            [
                "f3cb228a.4dcc98"
            ]
        ]
    },
    {
        "id": "695a6785.da1fb8",
        "type": "delay",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 208.49206924438477,
        "y": 340.47620391845703,
        "wires": [
            [
                "2a9439c9.dfb50e"
            ]
        ]
    },
    {
        "id": "9d2a6659.f768c8",
        "type": "device-type-manager",
        "z": "5aba5c1a.28fe7c",
        "auth": "bluemix",
        "name": "",
        "apiKey": "",
        "deviceType": "Car",
        "classId": "Gateway",
        "method": "Delete",
        "deviceTypeId": "",
        "serialNumber": "",
        "manufacturer": "",
        "model": "",
        "deviceClass": "",
        "infoDescription": "",
        "firmwareVersion": "",
        "hardwareVersion": "",
        "descriptiveLocation": "",
        "metadata": "{\"parts\":2222}",
        "password": "",
        "properties": [],
        "ignore": true,
        "x": 780,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "f0576aa0.6630f8",
        "type": "delay",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 560,
        "y": 500,
        "wires": [
            [
                "9d2a6659.f768c8"
            ]
        ]
    },
    {
        "id": "e5f36002.d8165",
        "type": "ibmiot in",
        "z": "d574f97d.4d29a8",
        "authentication": "boundService",
        "apiKey": "",
        "inputType": "cmd",
        "deviceId": "thermostat1",
        "applicationId": "",
        "deviceType": "Thermostat",
        "eventType": "+",
        "commandType": "configuration",
        "format": "json",
        "name": "IBM IoT",
        "service": "registered",
        "allDevices": true,
        "allApplications": "",
        "allDeviceTypes": true,
        "allEvents": true,
        "allCommands": true,
        "allFormats": "",
        "qos": "0",
        "x": 130,
        "y": 122.4285659790039,
        "wires": [
            [
                "7d16e9f5.e24c5"
            ]
        ]
    },
    {
        "id": "c2a62666.0a8848",
        "type": "ibmiot out",
        "z": "d574f97d.4d29a8",
        "authentication": "boundService",
        "apiKey": "",
        "outputType": "cmd",
        "deviceId": "thermostat1",
        "deviceType": "Thermostat",
        "eventCommandType": "configuration",
        "format": "json",
        "data": "{\"d\":{\"eventType\":\"CutInTempChange\",\"data\":\"21\"}}",
        "qos": "",
        "name": "IBM IoT",
        "service": "registered",
        "x": 1018.6093139648438,
        "y": 462.6602478027344,
        "wires": []
    },
    {
        "id": "e37aa65f.d41018",
        "type": "comment",
        "z": "d574f97d.4d29a8",
        "name": "Accept configuration change from platform",
        "info": "Accept following configuration change from platform\n\n1.Email ID for email notification.\n2.CutOutTemperature .\n3.CutInTemperature .\n4.AlertFrequency .\n\n",
        "x": 211,
        "y": 74.4285659790039,
        "wires": []
    },
    {
        "id": "5692a040.e1522",
        "type": "comment",
        "z": "d574f97d.4d29a8",
        "name": "Send  configuration change to  platform",
        "info": "",
        "x": 199,
        "y": 199.4285659790039,
        "wires": []
    },
    {
        "id": "c2f501a4.5c1cd",
        "type": "ibmiot in",
        "z": "97ea1ba1.9cee7",
        "authentication": "boundService",
        "apiKey": "",
        "inputType": "evt",
        "deviceId": "thermostat1",
        "applicationId": "",
        "deviceType": "Car",
        "eventType": "tempevt",
        "commandType": "",
        "format": "json",
        "name": "IBM IoT",
        "service": "registered",
        "allDevices": true,
        "allApplications": "",
        "allDeviceTypes": false,
        "allEvents": true,
        "allCommands": "",
        "allFormats": true,
        "qos": "0",
        "x": 66.95462036132812,
        "y": 130.28219604492188,
        "wires": [
            [
                "fd4a678b.9be2d8"
            ]
        ]
    },
    {
        "id": "cd072b1e.edc53",
        "type": "cloudant out",
        "z": "97ea1ba1.9cee7",
        "name": "database",
        "cloudant": "59411d37.e2ccbc",
        "database": "refrigeratordb",
        "service": "simulated-cars-cloudantNoSQLDB",
        "payonly": true,
        "operation": "insert",
        "x": 925.5081787109375,
        "y": 162.80740356445312,
        "wires": []
    },
    {
        "id": "bbe001b0.d5ceb8",
        "type": "comment",
        "z": "97ea1ba1.9cee7",
        "name": "Alarms and Alerts",
        "info": "Alarms and Alerts are raised as per the value\nof the current temperature .They are influenced \nby fllowing parameters.                         \n1.CutIn Temperature.                            \n2.CutOut temperature.\n\nIf temperature is lower than CutIn temperature \nand higher than CutOut temperature Alarms\nwill be raised .\n\nIf temperature is between CutIn and CutOut \ntemperature Alerts will be raised",
        "x": 104.95465087890625,
        "y": 78.28219604492188,
        "wires": []
    },
    {
        "id": "7c33013e.100c18",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "Simulation Dashboard Outlink",
        "links": [
            "7a579564.379394"
        ],
        "x": 515,
        "y": 540,
        "wires": []
    },
    {
        "id": "d8e79814.9912b",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "Simulation Dashboard Outlink",
        "links": [
            "7a579564.379394"
        ],
        "x": 655,
        "y": 680,
        "wires": []
    },
    {
        "id": "fe1b989c.332dc",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Dashboard Input",
        "info": "",
        "x": 753.889102935791,
        "y": 678.88893699646,
        "wires": []
    },
    {
        "id": "1bccc043.541ad",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Dashboard Input",
        "info": "",
        "x": 620,
        "y": 540,
        "wires": []
    },
    {
        "id": "4c3169f1.e48a98",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "RedirectStart",
        "info": "Redirect Start to the corrosponding virtual Device",
        "x": 110,
        "y": 1100,
        "wires": []
    },
    {
        "id": "d31b85a6.98518",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "RedirectStop",
        "info": "Redirect Stop to the corrosponding virtual Device",
        "x": 109,
        "y": 1206,
        "wires": []
    },
    {
        "id": "8dc374d6.1c5a78",
        "type": "link in",
        "z": "5aba5c1a.28fe7c",
        "name": "Redirect Start",
        "links": [
            "997275e5.5c1c5",
            "829b7dd3.790748",
            "da2b6fbb.f170e8"
        ],
        "x": 86,
        "y": 1144,
        "wires": [
            [
                "cb92247d.7d936"
            ]
        ]
    },
    {
        "id": "ceaf9019.22c13",
        "type": "link in",
        "z": "5aba5c1a.28fe7c",
        "name": "Redirect Stop",
        "links": [
            "fe220d7b.ef7b7",
            "91d69956.08b25",
            "9b3bb523.45e1d"
        ],
        "x": 85.88890647888184,
        "y": 1257.444414138794,
        "wires": [
            [
                "248c53a1.13aedc"
            ]
        ]
    },
    {
        "id": "b6b5cf30.845488",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "Simulator StartDevice",
        "links": [
            "8699df68.c408e8"
        ],
        "x": 322.0000305175781,
        "y": 1138.2222290039062,
        "wires": []
    },
    {
        "id": "5d77d015.3e005",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "Simulator StopDevice",
        "links": [
            "b60b420e.e88d08"
        ],
        "x": 324.2222595214844,
        "y": 1251.77783203125,
        "wires": []
    },
    {
        "id": "3e104526.6cb10a",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Stop Thermostat Device",
        "info": "",
        "x": 470,
        "y": 1260,
        "wires": []
    },
    {
        "id": "cb92247d.7d936",
        "type": "switch",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "property": "payload.deviceType",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Car",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 195.88890838623047,
        "y": 1144.1110286712646,
        "wires": [
            [
                "b6b5cf30.845488"
            ],
            [
                "b6b5cf30.845488"
            ]
        ]
    },
    {
        "id": "248c53a1.13aedc",
        "type": "switch",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "property": "payload.deviceType",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Car",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 194.2222442626953,
        "y": 1256.888916015625,
        "wires": [
            [
                "5d77d015.3e005"
            ],
            [
                "5d77d015.3e005"
            ]
        ]
    },
    {
        "id": "997275e5.5c1c5",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "From Add Device to flow context Start",
        "links": [
            "8dc374d6.1c5a78"
        ],
        "x": 975,
        "y": 380,
        "wires": []
    },
    {
        "id": "84ca5957.0f8848",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "RedirectStart",
        "info": "Redirect Start to the corrosponding vertual Device",
        "x": 1062.77783203125,
        "y": 372.3333435058594,
        "wires": []
    },
    {
        "id": "fe220d7b.ef7b7",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "From Delete Device stop",
        "links": [
            "ceaf9019.22c13"
        ],
        "x": 515,
        "y": 460,
        "wires": []
    },
    {
        "id": "d148a459.e97e98",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "RedirectStop",
        "info": "Redirect Stop to the corrosponding vertual Device",
        "x": 610,
        "y": 460,
        "wires": []
    },
    {
        "id": "98cb9d37.da732",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "RedirectState",
        "info": "Redirect Start to the corrosponding vertual Device",
        "x": 770,
        "y": 140,
        "wires": []
    },
    {
        "id": "acb4962e.7faf48",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "NOTE: Adding another simuation device type",
        "info": "Add the device type in the switch case and link it to start and stop of your simulated devices",
        "x": 694.0556182861328,
        "y": 1190.8889179229736,
        "wires": []
    },
    {
        "id": "3ed68f3e.a6d7d",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Start Thermostat Device",
        "info": "",
        "x": 450.7700443267822,
        "y": 1137.6984786987305,
        "wires": []
    },
    {
        "id": "f956192d.08214",
        "type": "link in",
        "z": "5aba5c1a.28fe7c",
        "name": "Add Device to flow context",
        "links": [
            "1b9a5d79.60d0e3"
        ],
        "x": 595,
        "y": 380,
        "wires": [
            [
                "12756c96.ee1a5b"
            ]
        ]
    },
    {
        "id": "1b9a5d79.60d0e3",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "From DB sync",
        "links": [
            "f956192d.08214"
        ],
        "x": 892.7777709960938,
        "y": 805.0000076293945,
        "wires": []
    },
    {
        "id": "396d4882.3a815",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Add Device to flow context",
        "info": "",
        "x": 1022.1111526489258,
        "y": 805.0000219345093,
        "wires": []
    },
    {
        "id": "df2729f3.bafd7",
        "type": "comment",
        "z": "5aba5c1a.28fe7c",
        "name": "Add Device to flow context",
        "info": "",
        "x": 450,
        "y": 380,
        "wires": []
    },
    {
        "id": "64b0445e.22b80c",
        "type": "function",
        "z": "d574f97d.4d29a8",
        "name": "Email change",
        "func": "var evt = 'emailChange';\nvar value = msg.payload;\n\nmsg.payload = {\n    eventType: evt,\n    data: value\n};\nmsg.payload=JSON.stringify({eventType: evt,data: value});\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 691.0999755859375,
        "y": 515.7999877929688,
        "wires": [
            [
                "c2a62666.0a8848"
            ]
        ]
    },
    {
        "id": "7c8ea939.48e8",
        "type": "function",
        "z": "d574f97d.4d29a8",
        "name": "Cut OutTemperatrure Change",
        "func": "var evt = 'CutOutTempChange';\nvar value = msg.payload;\ncontext.global.CutOutTemperature=36;\nmsg.payload = {\n    eventType: evt,\n    data: value\n};\nmsg.payload=JSON.stringify({eventType: evt,data: value});\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 740.0999145507812,
        "y": 303.2999572753906,
        "wires": [
            [
                "c2a62666.0a8848"
            ]
        ]
    },
    {
        "id": "e9d4bd1d.e4c148",
        "type": "function",
        "z": "d574f97d.4d29a8",
        "name": "Cut In Temperature Change",
        "func": "var evt = 'CutInTempChange';\nvar value = msg.payload;\ncontext.global.CutInTemperature=16;\nmsg.payload = {\n    eventType: evt,\n    data: value\n};\nmsg.payload=JSON.stringify({eventType: evt,data: value});\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 730.0999145507812,
        "y": 354.29998779296875,
        "wires": [
            [
                "c2a62666.0a8848"
            ]
        ]
    },
    {
        "id": "87ea52b.07a163",
        "type": "ui_text_input",
        "z": "d574f97d.4d29a8",
        "name": "",
        "label": "Service Engineer EMail ID",
        "group": "18e55744.d1d561",
        "order": 8,
        "width": "",
        "height": "",
        "passthru": true,
        "mode": "email",
        "delay": 300,
        "topic": "",
        "x": 411.24072265625,
        "y": 515.0682983398438,
        "wires": [
            [
                "64b0445e.22b80c"
            ]
        ]
    },
    {
        "id": "8ca82ac4.543e08",
        "type": "ui_numeric",
        "z": "d574f97d.4d29a8",
        "name": "Email frequency",
        "label": "Email frequency [ seconds ]",
        "group": "18e55744.d1d561",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": 0,
        "max": "120",
        "step": "",
        "x": 383.74072265625,
        "y": 583.0682983398438,
        "wires": [
            [
                "15dca70c.ca6c19"
            ]
        ]
    },
    {
        "id": "15dca70c.ca6c19",
        "type": "function",
        "z": "d574f97d.4d29a8",
        "name": "AlertFrequencyChange",
        "func": "var evt = 'alertFrequencyChange';\nvar value = msg.payload;\n\nmsg.payload = {\n    eventType: evt,\n    data: value\n};\nmsg.payload=JSON.stringify({eventType: evt,data: value});\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 721.99072265625,
        "y": 582.8182983398438,
        "wires": [
            [
                "c2a62666.0a8848"
            ]
        ]
    },
    {
        "id": "e9dc8c0e.e96548",
        "type": "inject",
        "z": "d574f97d.4d29a8",
        "name": "Set Default Value",
        "topic": "",
        "payload": "60",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 179.49072265625,
        "y": 583.0682983398438,
        "wires": [
            [
                "8ca82ac4.543e08"
            ]
        ]
    },
    {
        "id": "d78b1e4c.e21c4",
        "type": "inject",
        "z": "d574f97d.4d29a8",
        "name": "",
        "topic": "",
        "payload": "36",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 147.49072265625,
        "y": 303.9293899536133,
        "wires": [
            [
                "a38d15fb.cabbb8"
            ]
        ]
    },
    {
        "id": "97170b61.57213",
        "type": "inject",
        "z": "d574f97d.4d29a8",
        "name": "",
        "topic": "",
        "payload": "16",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 148.38656616210938,
        "y": 354.95719146728516,
        "wires": [
            [
                "eaa7e6f.cbe7518"
            ]
        ]
    },
    {
        "id": "b18f887.10e9a78",
        "type": "inject",
        "z": "d574f97d.4d29a8",
        "name": "",
        "topic": "",
        "payload": "monitoringserviceengineer@gmail.com",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 149.49072265625,
        "y": 516.0683059692383,
        "wires": [
            [
                "87ea52b.07a163"
            ]
        ]
    },
    {
        "id": "a38d15fb.cabbb8",
        "type": "ui_numeric",
        "z": "d574f97d.4d29a8",
        "name": "",
        "label": "High temperature alarm threshold",
        "group": "18e55744.d1d561",
        "order": 2,
        "width": "8",
        "height": "1",
        "passthru": true,
        "topic": "",
        "format": "{{value}} C",
        "min": "25",
        "max": "40",
        "step": "",
        "x": 439.49072265625,
        "y": 303.63970947265625,
        "wires": [
            [
                "7c8ea939.48e8"
            ]
        ]
    },
    {
        "id": "5be2b95f.55f1b",
        "type": "ui_text",
        "z": "d574f97d.4d29a8",
        "group": "18e55744.d1d561",
        "order": 3,
        "width": "6",
        "height": "1",
        "name": "Desired temp. label",
        "label": "Desired temp.",
        "format": "",
        "layout": "row-left",
        "x": 389.49072265625,
        "y": 406.6397171020508,
        "wires": []
    },
    {
        "id": "b981bb36.85aa18",
        "type": "inject",
        "z": "d574f97d.4d29a8",
        "name": "",
        "topic": "",
        "payload": "23",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 149.49072265625,
        "y": 405.63970947265625,
        "wires": [
            [
                "95959861.8f5288"
            ]
        ]
    },
    {
        "id": "eaa7e6f.cbe7518",
        "type": "ui_numeric",
        "z": "d574f97d.4d29a8",
        "name": "",
        "label": "Low temperature alert threshold",
        "group": "18e55744.d1d561",
        "order": 5,
        "width": "8",
        "height": "1",
        "passthru": true,
        "topic": "",
        "format": "{{value}} C",
        "min": "10",
        "max": "25",
        "step": "",
        "x": 427.49073791503906,
        "y": 354.63970947265625,
        "wires": [
            [
                "e9d4bd1d.e4c148"
            ]
        ]
    },
    {
        "id": "2c385be.4e617a4",
        "type": "ui_text",
        "z": "d574f97d.4d29a8",
        "group": "18e55744.d1d561",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Intro. text",
        "label": "These alert notification settings apply to all rooms.",
        "format": "",
        "layout": "row-spread",
        "x": 361.49072265625,
        "y": 253.63970947265625,
        "wires": []
    },
    {
        "id": "bc9d36d4.54d54",
        "type": "ui_text",
        "z": "d574f97d.4d29a8",
        "group": "18e55744.d1d561",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "Warning explanation",
        "label": "Temperature outside the threshold range triggers an on-screen alert.",
        "format": "",
        "layout": "row-spread",
        "x": 399.49072265625,
        "y": 446.63970947265625,
        "wires": []
    },
    {
        "id": "95959861.8f5288",
        "type": "ui_text",
        "z": "d574f97d.4d29a8",
        "group": "18e55744.d1d561",
        "order": 4,
        "width": "2",
        "height": "1",
        "name": "Desired temp. value",
        "label": "",
        "format": "23 C",
        "layout": "row-left",
        "x": 709.49072265625,
        "y": 406.63970947265625,
        "wires": []
    },
    {
        "id": "83586154.25c138",
        "type": "ui_text",
        "z": "d574f97d.4d29a8",
        "group": "18e55744.d1d561",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "Alert explanation",
        "label": "High temperature threshold triggers an email alert.",
        "format": "",
        "layout": "row-spread",
        "x": 390,
        "y": 481,
        "wires": []
    },
    {
        "id": "bd2cdb0c.7564d8",
        "type": "function",
        "z": "97ea1ba1.9cee7",
        "name": "Alarm",
        "func": "var now = ( new Date() ).getTime();\nvar value=msg.payload.data;\nmsg.payload = {\n    tstamp: now,\n    Temperature: value, \n    incident: \"Alarm\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 745.4879455566406,
        "y": 118.25955200195312,
        "wires": [
            [
                "370a1d9e.c3d1ba",
                "cedd852b.2cccb8",
                "cd072b1e.edc53"
            ]
        ]
    },
    {
        "id": "e4e01f2.6c826e",
        "type": "function",
        "z": "97ea1ba1.9cee7",
        "name": "Alert",
        "func": "var now = ( new Date() ).getTime();\nvar value=msg.payload.data;\nmsg.payload = {\n    tstamp: now,\n    Temperature: value, \n    incident: \"Alert\",\n    Cause :\"Temperature above CutIn value\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 747.4879455566406,
        "y": 193.25955200195312,
        "wires": [
            [
                "d0e99deb.1baec8",
                "cd072b1e.edc53"
            ]
        ]
    },
    {
        "id": "cedd852b.2cccb8",
        "type": "subflow:175817de.c3752",
        "z": "97ea1ba1.9cee7",
        "name": "Alert Service Engineer",
        "x": 963.4879455566406,
        "y": 116.39886474609375,
        "wires": []
    },
    {
        "id": "6a4772ef.aa690c",
        "type": "subflow:90969cec.056bc",
        "z": "97ea1ba1.9cee7",
        "name": "Alarm / Alert Check",
        "x": 558.9164733886719,
        "y": 125.11666870117188,
        "wires": [
            [
                "bd2cdb0c.7564d8"
            ],
            [
                "e4e01f2.6c826e"
            ]
        ]
    },
    {
        "id": "370a1d9e.c3d1ba",
        "type": "function",
        "z": "97ea1ba1.9cee7",
        "name": "Temperature Alarm",
        "func": "var temp=msg.payload.Temperature;\nmsg.payload=\"Check Thermostat. Current temperature is :\"+temp;\nmsg.topic=\"Alarm\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 955.3712463378906,
        "y": 67,
        "wires": [
            [
                "36cba740.464d88"
            ]
        ]
    },
    {
        "id": "36cba740.464d88",
        "type": "ui_toast",
        "z": "97ea1ba1.9cee7",
        "position": "top right",
        "displayTime": "",
        "name": "show toast",
        "x": 1150,
        "y": 60,
        "wires": []
    },
    {
        "id": "d0e99deb.1baec8",
        "type": "function",
        "z": "97ea1ba1.9cee7",
        "name": "Temperature Alert",
        "func": "var temp=msg.payload.Temperature;\nmsg.payload=\"Check Thermostat. Current temperature is :\"+temp;\nmsg.topic=\"Alert\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 956.4879455566406,
        "y": 217.11666870117188,
        "wires": [
            []
        ]
    },
    {
        "id": "fd4a678b.9be2d8",
        "type": "switch",
        "z": "97ea1ba1.9cee7",
        "name": "",
        "property": "deviceId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "selectedDevice.deviceId",
                "vt": "global"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 197,
        "y": 130.91668701171875,
        "wires": [
            [
                "35748364.758d4c",
                "fdecd90a.423b2",
                "1852e422.f18a24",
                "a211209c.5d498",
                "cc298af9.f36ab8",
                "ccb79343.d55138"
            ],
            []
        ]
    },
    {
        "id": "35748364.758d4c",
        "type": "change",
        "z": "97ea1ba1.9cee7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.d.EngineTemperature",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 380,
        "wires": [
            [
                "b30939a8.d20dc",
                "dc8575bd.0ef9e8"
            ]
        ]
    },
    {
        "id": "fdecd90a.423b2",
        "type": "change",
        "z": "97ea1ba1.9cee7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.d.FuelLevel",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 460,
        "wires": [
            [
                "88e92461.3807b",
                "acd98a5c.9f1da"
            ]
        ]
    },
    {
        "id": "1852e422.f18a24",
        "type": "change",
        "z": "97ea1ba1.9cee7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.d.CurrentSpeed",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 540,
        "wires": [
            [
                "55f446ef.0be598",
                "46e20136.5f6d88"
            ]
        ]
    },
    {
        "id": "a211209c.5d498",
        "type": "change",
        "z": "97ea1ba1.9cee7",
        "name": "Format Data",
        "rules": [
            {
                "t": "set",
                "p": "payload.data",
                "pt": "msg",
                "to": "payload.d.ActualTemperature",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360.5333557128906,
        "y": 128.11666870117188,
        "wires": [
            [
                "59d6ee1f.b4b118",
                "6a4772ef.aa690c"
            ]
        ]
    },
    {
        "id": "b30939a8.d20dc",
        "type": "ui_chart",
        "z": "97ea1ba1.9cee7",
        "name": "Engine Temperature",
        "group": "80d8c020.63875",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Engine Temperature",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "Engine Temperature",
        "ymin": "0",
        "ymax": "150",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": "",
        "colors": [
            "#1F77B4",
            "#AEC7E8",
            "#FF7F0E",
            "#2CA02C",
            "#98DF8A",
            "#D62728",
            "#FF9896",
            "#9467BD",
            "#C5B0D5"
        ],
        "x": 620,
        "y": 380,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "61e8cd27.97de24",
        "type": "set properties",
        "z": "efbe0ac4.93412",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "name": "",
        "propAll": false,
        "prop": "be6df8b37d4d",
        "valueType": "msg",
        "value": "payload.properties.Location",
        "x": 1200,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "a20130f7.1a4e8",
        "type": "counter",
        "z": "efbe0ac4.93412",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": null,
        "upper": null,
        "mode": "increment",
        "outputs": "1",
        "x": 540,
        "y": 60,
        "wires": [
            [
                "f3051991.9bf21"
            ]
        ]
    },
    {
        "id": "f3051991.9bf21",
        "type": "change",
        "z": "efbe0ac4.93412",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload.properties.Location",
                "pt": "msg",
                "from": "\\d+$",
                "fromt": "re",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 60,
        "wires": [
            [
                "61e8cd27.97de24"
            ]
        ]
    },
    {
        "id": "bd64b82e.c9fff",
        "type": "ui_template",
        "z": "5aba5c1a.28fe7c",
        "group": "b30eebfe.f2c488",
        "name": "Simulation Dashboard",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<link data-require=\"bootstrap-css@3.0.2\" data-semver=\"3.0.3\" rel=\"stylesheet\" href=\"//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css\" />\n<div ng-app=\"simulator\">\n  <div>\n    <div ng-repeat=\"(schemaName, data) in msg.payload\" >\n      <div style=\"text-align:right\">\n        <img src=\"/images/custom/ibm-logo-7.jpg\" style=\"float:right\" />\n      </div>\n      <h2>IBM IoT 4 Cars, {{data.schema.deviceType}} View</h2>\n      <md-button background=\"#9ee3f900\" color=\"#fff0\" ng-init=\"instances=1\" ng-click='send({topic: \"createDevice\" , payload: {deviceType: data.schema.deviceType, instances: instances}})'>Enroll</md-button>\n      <label><input type=\"number\" name=\"input\" ng-model=\"instances\"\n        min=\"1\" max=\"19\" required> instance(s) of {{data.schema.deviceType}}</label>\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th>Start/Stop</th>\n              <th>Device Id</th>\n              <th ng-repeat=\"property in data.schema.properties | orderBy : 'name'\" ng-if='property != \"Latitude\" && property != \"Longitude\"' >\n                {{ property }}\n              </th>\n              <th>Delete Device</th>\n              <th>View Dashboard</th>\n              <th>View Location</th>\n              <th>Error Reports</th>\n            </tr>\n            <tbody >\n              <tr ng-repeat=\"(deviceId, device) in data.devices\" ng-model=\"data.devices[deviceId]\" id={{deviceId}}>\n                <td>\n                  <md-switch aria-label=\"stopDevice\" ng-model=\"device.isOn\" ng-change='send({topic: (!device.isOn) ? \"stopDevice\" : \"startDevice\" , payload: {deviceType: data.schema.deviceType, deviceId: deviceId, properties: device.properties}})'></md-switch>\n                </td>\n                <td>{{ deviceId }}</td>\n                <td ng-repeat=\"devPrp in data.schema.properties | orderBy : 'name'\" ng-if='devPrp != \"Latitude\" && devPrp != \"Longitude\"' ng-init='editMode=false; editVal'>{{ device.properties[devPrp] }}\n                  <a href=\"#\" ng-show=\"device.isOn && device.properties[devPrp] !== undefined && editMode==false\" ng-click=\"editMode = true; editVal = device.properties[devPrp]\">\n                    <i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\n                  </a>\n                  <input ng-show='editMode && device.isOn && device.propertiesInput[devPrp] === \"text\"' type=\"text\" ng-model=\"editVal\" ng-value=\"editVal\">\n                  <input ng-show='editMode && device.isOn && device.propertiesInput[devPrp] === \"checkbox\"' type=\"checkbox\" ng-model=\"editVal\" ng-value=\"editVal\">\n                  <input ng-show='editMode && device.isOn && device.propertiesInput[devPrp] === \"number\"' type=\"number\" ng-model=\"editVal\" ng-value=\"editVal\">\n                  <a href=\"#\" ng-show=\"editMode && device.isOn\" ng-click=\n                  'payload={deviceType: data.schema.deviceType, deviceId: deviceId};\n                  payload[devPrp] = editVal;\n                  send({topic: \"changeProperty\", payload: payload}); editMode=false'>\n                  <i class=\"fa fa-floppy-o\" aria-hidden=\"true\"></i>\n                </a>\n                <a href=\"#\" ng-show=\"device.isOn && editMode\" ng-click=\"editMode=false\">\n                  <i class=\"fa fa-eraser\" aria-hidden=\"true\"></i>\n                </a>\n              </td>\n              <td>\n                <md-button  ng-click='send({topic: \"deleteDevice\", payload: {deviceType: data.schema.deviceType, deviceId: deviceId}})'>\n                  delete\n                  <ng-md-icon iconType===\"angular-material\" icon=\"delete_forever\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"> <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z\"></path></svg></ng-md-icon>\n                </md-button>\n              </td>\n              <td onclick=\"setTimeout(function(){window.location.reload()},100)\">\n                <a href=\"#/1\" ng-click='send({topic: \"viewDevice\", payload: {deviceType: data.schema.deviceType, deviceId: deviceId}})'>\n                  <i class=\"fa fa-bar-chart\" aria-hidden=\"true\"></i>\n                </a>\n              </td>\n              <td onclick=\"setTimeout(function(){window.location.reload()},100)\">\n                <a href=\"#/2\" ng-click='send({topic: \"viewLocation\", payload: {deviceType: data.schema.deviceType, deviceId: deviceId}})'>\n                  <i class=\"fa fa-bar-chart\" aria-hidden=\"true\"></i>\n                </a>\n              </td>\n              <td onclick=\"setTimeout(function(){window.location.reload()},100)\">\n                <a href=\"#/3\" ng-click='send({topic: \"viewAnomaly\", payload: {deviceType: data.schema.deviceType, deviceId: deviceId}})'>\n                  <i class=\"fa fa-bar-chart\" aria-hidden=\"true\"></i>\n                </a>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "x": 240,
        "y": 140,
        "wires": [
            [
                "9af3c101.2b4408",
                "fc6ba5f8.8b80e"
            ]
        ]
    },
    {
        "id": "91f943ac.8c9c3",
        "type": "debug",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "false",
        "x": 210,
        "y": 180,
        "wires": []
    },
    {
        "id": "dabb2bea.5da1e",
        "type": "ui_template",
        "z": "5aba5c1a.28fe7c",
        "group": "3f9c05c6.945762",
        "name": "Header",
        "order": 2,
        "width": "0",
        "height": "0",
        "format": "<img src=\"/images/custom/blue_gradient_top.png\" />",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 280,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "f1a706b3.2f5eb8",
        "type": "ui_template",
        "z": "5aba5c1a.28fe7c",
        "group": "32923f6a.2dd278",
        "name": "Footer",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<img src=\"/images/custom/blue_gradient_bottom.png\" />",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 270,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "29b876be.196e32",
        "type": "ui_template",
        "z": "97ea1ba1.9cee7",
        "group": "1d53a3ea.600b7c",
        "name": "Header",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<img src=\"/images/custom/blue_gradient_top.png\" />\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 140,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "7ec6d748.ac2db",
        "type": "ui_template",
        "z": "97ea1ba1.9cee7",
        "group": "3cf00a69.155a0e",
        "name": "Footer",
        "order": 2,
        "width": "0",
        "height": "0",
        "format": "<img src=\"/images/custom/blue_gradient_bottom.png\" />",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 130,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "f590f65b.c73f9",
        "type": "ui_ui_control",
        "z": "97ea1ba1.9cee7",
        "name": "ui control",
        "x": 120,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "a80093a7.1183e8",
        "type": "ui_button",
        "z": "97ea1ba1.9cee7",
        "name": "",
        "group": "3cf00a69.155a0e",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Back",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "0",
        "payloadType": "str",
        "topic": "",
        "x": 80,
        "y": 319,
        "wires": [
            [
                "f590f65b.c73f9"
            ]
        ]
    },
    {
        "id": "696e572.4dca8a8",
        "type": "ui_ui_control",
        "z": "d0044561.02b458",
        "name": "ui control",
        "x": 400,
        "y": 220,
        "wires": [
            [
                "c5d162e9.d4fee8"
            ]
        ]
    },
    {
        "id": "9a77f91b.014778",
        "type": "ui_button",
        "z": "d0044561.02b458",
        "name": "",
        "group": "9099ebb9.e98548",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Back",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "0",
        "payloadType": "str",
        "topic": "",
        "x": 220,
        "y": 219,
        "wires": [
            []
        ]
    },
    {
        "id": "ce598b0e.72aa98",
        "type": "ui_template",
        "z": "d0044561.02b458",
        "group": "22d55ba4.eca9b4",
        "name": "",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<link data-require=\"bootstrap-css@3.0.2\" data-semver=\"3.0.3\" rel=\"stylesheet\" href=\"//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css\" />\n<div ng-app=\"simulator\" >\n    <div>\n        <div ng-repeat=\"data in msg.tickets | orderBy: 'ts'\" style=\"float: left; width: 400px\">\n            <table class=\"table\" style=\"border-collapse:separate; border-spacing: 0px 0px; padding: 20px\">\n                <thead>\n                    <th style=\"width: 150px\">{{data.ts}}</th>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>Reason</td>\n                        <td>{{data.reason}}</td>\n                    </tr>\n                    <tr>\n                        <td>ADDR</td>\n                        <td>{{data.addr}}</td>\n                    </tr>\n                    <tr>\n                        <td>SW</td>\n                        <td>{{data.sw}}</td>\n                    </tr>\n                    <tr>\n                        <td>HW</td>\n                        <td>{{data.hw}}</td>\n                    </tr>\n                    <tr>\n                        <td>Manufacturer</td>\n                        <td>{{data.manufacturer}}</td>\n                    </tr>\n                    <tr>\n                        <td>Code written by</td>\n                        <td>{{data.codedBy}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>    \n    </div>\n</div>\n    \n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 700,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "c192bbe2.585de8",
        "type": "inject",
        "z": "d0044561.02b458",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 90,
        "y": 60,
        "wires": [
            [
                "79bb91d6.4a4b58"
            ]
        ]
    },
    {
        "id": "79bb91d6.4a4b58",
        "type": "random",
        "z": "d0044561.02b458",
        "name": "",
        "low": "1",
        "high": "10",
        "inte": "true",
        "x": 240,
        "y": 60,
        "wires": [
            [
                "ea9b902.d5cc8f"
            ]
        ]
    },
    {
        "id": "c5d162e9.d4fee8",
        "type": "ui_template",
        "z": "d0044561.02b458",
        "group": "b071f23d.e04f48",
        "name": "Header",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<img src=\"/images/custom/blue_gradient_top.png\" />\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 411,
        "y": 303,
        "wires": [
            [
                "50934d2c.af3fb4"
            ]
        ]
    },
    {
        "id": "50934d2c.af3fb4",
        "type": "ui_template",
        "z": "d0044561.02b458",
        "group": "9099ebb9.e98548",
        "name": "Footer",
        "order": 3,
        "width": "0",
        "height": "0",
        "format": "<img src=\"/images/custom/blue_gradient_bottom.png\" />",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 408,
        "y": 368,
        "wires": [
            []
        ]
    },
    {
        "id": "ea9b902.d5cc8f",
        "type": "change",
        "z": "d0044561.02b458",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "numTickets",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 140,
        "wires": [
            [
                "761da981.142b3"
            ]
        ]
    },
    {
        "id": "23c21dfb.243cea",
        "type": "switch",
        "z": "d0044561.02b458",
        "name": "",
        "property": "tickets.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "numTickets",
                "vt": "msg"
            },
            {
                "t": "lt",
                "v": "numTickets",
                "vt": "msg"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 530,
        "y": 60,
        "wires": [
            [
                "ce598b0e.72aa98"
            ],
            [
                "761da981.142b3"
            ]
        ]
    },
    {
        "id": "9909f659.beacd8",
        "type": "debug",
        "z": "d0044561.02b458",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 690,
        "y": 180,
        "wires": []
    },
    {
        "id": "761da981.142b3",
        "type": "subflow:5514de4c.7fdd7",
        "z": "d0044561.02b458",
        "name": "Generate Ticket",
        "x": 540,
        "y": 140,
        "wires": [
            [
                "9909f659.beacd8",
                "23c21dfb.243cea"
            ]
        ]
    },
    {
        "id": "88e92461.3807b",
        "type": "ui_gauge",
        "z": "97ea1ba1.9cee7",
        "name": "Fuel Level",
        "group": "777ba375.cceed4",
        "order": 4,
        "width": 0,
        "height": 0,
        "gtype": "wave",
        "title": "Fuel Level",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 580,
        "y": 500,
        "wires": []
    },
    {
        "id": "55f446ef.0be598",
        "type": "ui_gauge",
        "z": "97ea1ba1.9cee7",
        "name": "Current Speed",
        "group": "777ba375.cceed4",
        "order": 3,
        "width": 0,
        "height": 0,
        "gtype": "compass",
        "title": "Current Speed",
        "label": "km/h",
        "format": "{{value}}",
        "min": 0,
        "max": "180",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 600,
        "y": 580,
        "wires": []
    },
    {
        "id": "dc8575bd.0ef9e8",
        "type": "ui_gauge",
        "z": "97ea1ba1.9cee7",
        "name": "Engine Temperature",
        "group": "777ba375.cceed4",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Engine Temperature",
        "label": "C",
        "format": "{{value}}",
        "min": "50",
        "max": "150",
        "colors": [
            "#00B500",
            "#E6E600",
            "#CA3838"
        ],
        "seg1": "70",
        "seg2": "85",
        "x": 620,
        "y": 420,
        "wires": []
    },
    {
        "id": "cc298af9.f36ab8",
        "type": "debug",
        "z": "97ea1ba1.9cee7",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 350,
        "y": 80,
        "wires": []
    },
    {
        "id": "ccb79343.d55138",
        "type": "change",
        "z": "97ea1ba1.9cee7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.d.PowerConsumption",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 620,
        "wires": [
            [
                "7b80f45c.9a6764",
                "ea696fb.846851"
            ]
        ]
    },
    {
        "id": "7b80f45c.9a6764",
        "type": "ui_gauge",
        "z": "97ea1ba1.9cee7",
        "name": "Power Consumption",
        "group": "777ba375.cceed4",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "Power Consumption",
        "label": "W",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "33",
        "seg2": "67",
        "x": 620,
        "y": 660,
        "wires": []
    },
    {
        "id": "ea696fb.846851",
        "type": "ui_chart",
        "z": "97ea1ba1.9cee7",
        "name": "Power Consumption",
        "group": "80d8c020.63875",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Engine Temperature",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "Power Consumption",
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": "",
        "colors": [
            "#1F77B4",
            "#AEC7E8",
            "#FF7F0E",
            "#2CA02C",
            "#98DF8A",
            "#D62728",
            "#FF9896",
            "#9467BD",
            "#C5B0D5"
        ],
        "x": 620,
        "y": 620,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "46e20136.5f6d88",
        "type": "ui_chart",
        "z": "97ea1ba1.9cee7",
        "name": "Speed",
        "group": "80d8c020.63875",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Speed",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "Speed",
        "ymin": "0",
        "ymax": "180",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": "",
        "colors": [
            "#1F77B4",
            "#AEC7E8",
            "#FF7F0E",
            "#2CA02C",
            "#98DF8A",
            "#D62728",
            "#FF9896",
            "#9467BD",
            "#C5B0D5"
        ],
        "x": 570,
        "y": 540,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "acd98a5c.9f1da",
        "type": "ui_chart",
        "z": "97ea1ba1.9cee7",
        "name": "Fuel Level",
        "group": "80d8c020.63875",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Fuel Level",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "Fuel Level",
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": "",
        "colors": [
            "#1F77B4",
            "#AEC7E8",
            "#FF7F0E",
            "#2CA02C",
            "#98DF8A",
            "#D62728",
            "#FF9896",
            "#9467BD",
            "#C5B0D5"
        ],
        "x": 580,
        "y": 460,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "3c7c88c3.bf93b",
        "type": "ibmiot in",
        "z": "63c5fa2.b19a184",
        "authentication": "boundService",
        "apiKey": "",
        "inputType": "evt",
        "deviceId": "",
        "applicationId": "",
        "deviceType": "Car",
        "eventType": "getLocation",
        "commandType": "",
        "format": "json",
        "name": "IBM IoT",
        "service": "registered",
        "allDevices": true,
        "allApplications": "",
        "allDeviceTypes": "",
        "allEvents": "",
        "allCommands": "",
        "allFormats": "",
        "qos": 0,
        "x": 70,
        "y": 260,
        "wires": [
            [
                "d8251fc6.9a8c8",
                "ab2ecf90.892d4"
            ]
        ]
    },
    {
        "id": "f3e6df1c.6177d8",
        "type": "change",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "selectedDevice",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 220,
        "wires": [
            [
                "91189aca.65d0a"
            ]
        ]
    },
    {
        "id": "59d6ee1f.b4b118",
        "type": "function",
        "z": "97ea1ba1.9cee7",
        "name": "Temperature",
        "func": "var temp= msg.payload.data;\nmsg.payload = temp;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 549.0324172973633,
        "y": 288.76662254333496,
        "wires": [
            []
        ]
    },
    {
        "id": "d8251fc6.9a8c8",
        "type": "debug",
        "z": "63c5fa2.b19a184",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "false",
        "x": 250,
        "y": 200,
        "wires": []
    },
    {
        "id": "8f3d4a02.0429f8",
        "type": "generate event",
        "z": "efbe0ac4.93412",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "evt": "3c35cd507eb1",
        "name": "",
        "x": 1070,
        "y": 300,
        "wires": [
            [
                "49f28353.3a8f7c"
            ]
        ]
    },
    {
        "id": "d9cab118.9267f",
        "type": "generate event",
        "z": "efbe0ac4.93412",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "evt": "8c11465b27e5",
        "name": "",
        "x": 1070,
        "y": 360,
        "wires": [
            [
                "49f28353.3a8f7c"
            ]
        ]
    },
    {
        "id": "4e35915b.e01768",
        "type": "http request",
        "z": "63c5fa2.b19a184",
        "name": "LocalWeatherSNS",
        "method": "GET",
        "ret": "obj",
        "url": "https://{{{twcUrl}}}/api/weather/v1/geocode/{{{latitude}}}/{{{longitude}}}/observations.json?language={{{language}}}",
        "tls": "",
        "x": 970,
        "y": 260,
        "wires": [
            [
                "beeb59cd.d223",
                "5be682b7.dcf50c",
                "8494c899.13d548",
                "3c08e8ce.12cd1",
                "a939d684.aaddb"
            ]
        ]
    },
    {
        "id": "11973ebd.ece709",
        "type": "inject",
        "z": "63c5fa2.b19a184",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 250,
        "y": 480,
        "wires": [
            [
                "85cc49de.822eb8"
            ]
        ]
    },
    {
        "id": "35621240.f7b076",
        "type": "debug",
        "z": "63c5fa2.b19a184",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 610,
        "y": 480,
        "wires": []
    },
    {
        "id": "85cc49de.822eb8",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latitude",
                "pt": "msg",
                "to": "48.78",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "longitude",
                "pt": "msg",
                "to": "9.16",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "language",
                "pt": "msg",
                "to": "en-GB",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 480,
        "wires": [
            [
                "35621240.f7b076",
                "d9ee11c1.2cd18"
            ]
        ]
    },
    {
        "id": "2e71ead7.edc0ce",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "language",
                "pt": "msg",
                "to": "en-GB",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "twcUrl",
                "pt": "msg",
                "to": "twcservice.mybluemix.net",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 260,
        "wires": [
            [
                "4e35915b.e01768",
                "d8ebc19c.c522d8",
                "9333843f.7bfe38"
            ]
        ]
    },
    {
        "id": "d8ebc19c.c522d8",
        "type": "debug",
        "z": "63c5fa2.b19a184",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 930,
        "y": 340,
        "wires": []
    },
    {
        "id": "589a3d0.e676344",
        "type": "function",
        "z": "63c5fa2.b19a184",
        "name": "",
        "func": "var loc = msg.payload.d;\n\nmsg.latitude = loc.Latitude.toFixed(2);\nmsg.longitude = loc.Longitude.toFixed(2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 530,
        "y": 260,
        "wires": [
            [
                "2e71ead7.edc0ce"
            ]
        ]
    },
    {
        "id": "4f7ed824.7c65b",
        "type": "ui_text",
        "z": "63c5fa2.b19a184",
        "group": "9d1d57e8.0af4e",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Observation Location",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1440,
        "y": 260,
        "wires": []
    },
    {
        "id": "beeb59cd.d223",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.observation.obs_name",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 260,
        "wires": [
            [
                "4f7ed824.7c65b"
            ]
        ]
    },
    {
        "id": "5be682b7.dcf50c",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.observation.temp",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 300,
        "wires": [
            [
                "d3a9e6eb.3a1388"
            ]
        ]
    },
    {
        "id": "8494c899.13d548",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.observation.wx_phrase",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 380,
        "wires": [
            [
                "aba998f4.31d4f8"
            ]
        ]
    },
    {
        "id": "d3a9e6eb.3a1388",
        "type": "ui_text",
        "z": "63c5fa2.b19a184",
        "group": "9d1d57e8.0af4e",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "Current Temperature",
        "label": "Current Temperature",
        "format": "{{msg.payload}} &deg; C",
        "layout": "row-spread",
        "x": 1440,
        "y": 300,
        "wires": []
    },
    {
        "id": "aba998f4.31d4f8",
        "type": "ui_text",
        "z": "63c5fa2.b19a184",
        "group": "9d1d57e8.0af4e",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "Weather Conditions",
        "label": "Weather Conditions",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1430,
        "y": 380,
        "wires": []
    },
    {
        "id": "ab2ecf90.892d4",
        "type": "delay",
        "z": "63c5fa2.b19a184",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 260,
        "y": 260,
        "wires": [
            [
                "589a3d0.e676344"
            ]
        ]
    },
    {
        "id": "d9ee11c1.2cd18",
        "type": "http request",
        "z": "63c5fa2.b19a184",
        "name": "LocalWeatherSNS",
        "method": "GET",
        "ret": "obj",
        "url": "https://twcservice.mybluemix.net/api/weather/v1/geocode/{{{latitude}}}/{{{longitude}}}/observations.json?language={{{language}}}",
        "tls": "",
        "x": 650,
        "y": 540,
        "wires": [
            [
                "f71afa79.a062"
            ]
        ]
    },
    {
        "id": "f71afa79.a062",
        "type": "debug",
        "z": "63c5fa2.b19a184",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 850,
        "y": 540,
        "wires": []
    },
    {
        "id": "3c4170a8.371938",
        "type": "http request",
        "z": "63c5fa2.b19a184",
        "name": "Location",
        "method": "GET",
        "ret": "obj",
        "url": "https://twcservice.mybluemix.net/api/weather/v3/location/point?geocode={{{latitude}}},{{{longitude}}}&language={{{language}}}",
        "tls": "",
        "x": 620,
        "y": 640,
        "wires": [
            [
                "535f7aff.3755b4"
            ]
        ]
    },
    {
        "id": "83abe1f9.0d10c",
        "type": "inject",
        "z": "63c5fa2.b19a184",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 250,
        "y": 640,
        "wires": [
            [
                "dcfba287.d599f"
            ]
        ]
    },
    {
        "id": "dcfba287.d599f",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latitude",
                "pt": "msg",
                "to": "48.78",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "longitude",
                "pt": "msg",
                "to": "9.16",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "language",
                "pt": "msg",
                "to": "en-GB",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 640,
        "wires": [
            [
                "3c4170a8.371938"
            ]
        ]
    },
    {
        "id": "535f7aff.3755b4",
        "type": "debug",
        "z": "63c5fa2.b19a184",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 850,
        "y": 640,
        "wires": []
    },
    {
        "id": "3c08e8ce.12cd1",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.observation.pressure",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 340,
        "wires": [
            [
                "68e3c032.6c47e"
            ]
        ]
    },
    {
        "id": "68e3c032.6c47e",
        "type": "ui_text",
        "z": "63c5fa2.b19a184",
        "group": "9d1d57e8.0af4e",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Pressure",
        "label": "Pressure",
        "format": "{{msg.payload}} Pa",
        "layout": "row-spread",
        "x": 1400,
        "y": 340,
        "wires": []
    },
    {
        "id": "9333843f.7bfe38",
        "type": "http request",
        "z": "63c5fa2.b19a184",
        "name": "Location",
        "method": "GET",
        "ret": "obj",
        "url": "https://{{{twcUrl}}}/api/weather/v3/location/point?geocode={{{latitude}}},{{{longitude}}}&language={{{language}}}",
        "tls": "",
        "x": 940,
        "y": 200,
        "wires": [
            [
                "7f36447.f86cd3c",
                "365842b9.98e0be",
                "31186acc.127f3e",
                "1f083fa0.f30ed8",
                "9f1c3754.6ff8"
            ]
        ]
    },
    {
        "id": "7f36447.f86cd3c",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.location.city",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 160,
        "wires": [
            [
                "5396ba4d.a88234"
            ]
        ]
    },
    {
        "id": "5396ba4d.a88234",
        "type": "ui_text",
        "z": "63c5fa2.b19a184",
        "group": "cd0101a7.7e2e2",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "City",
        "label": "City",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1390,
        "y": 160,
        "wires": []
    },
    {
        "id": "6febd48a.4a50cc",
        "type": "ui_text",
        "z": "63c5fa2.b19a184",
        "group": "cd0101a7.7e2e2",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "Area",
        "label": "Area",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1390,
        "y": 120,
        "wires": []
    },
    {
        "id": "d4727e23.1caca8",
        "type": "ui_text",
        "z": "63c5fa2.b19a184",
        "group": "cd0101a7.7e2e2",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Country",
        "label": "Country",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1400,
        "y": 80,
        "wires": []
    },
    {
        "id": "365842b9.98e0be",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.location.postalCode",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 200,
        "wires": [
            [
                "31e63552.512852"
            ]
        ]
    },
    {
        "id": "31e63552.512852",
        "type": "ui_text",
        "z": "63c5fa2.b19a184",
        "group": "cd0101a7.7e2e2",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Postal Code",
        "label": "Postal Code",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1410,
        "y": 200,
        "wires": []
    },
    {
        "id": "31186acc.127f3e",
        "type": "debug",
        "z": "63c5fa2.b19a184",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 1190,
        "y": 40,
        "wires": []
    },
    {
        "id": "a939d684.aaddb",
        "type": "debug",
        "z": "63c5fa2.b19a184",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 1190,
        "y": 420,
        "wires": []
    },
    {
        "id": "1f083fa0.f30ed8",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.location.country",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 80,
        "wires": [
            [
                "d4727e23.1caca8"
            ]
        ]
    },
    {
        "id": "9f1c3754.6ff8",
        "type": "change",
        "z": "63c5fa2.b19a184",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.location.adminDistrict",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 120,
        "wires": [
            [
                "6febd48a.4a50cc"
            ]
        ]
    },
    {
        "id": "2abc6efc.deec32",
        "type": "set properties",
        "z": "efbe0ac4.93412",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "name": "",
        "propAll": false,
        "prop": "be6df8b37d4d",
        "valueType": "msg",
        "value": "payload.properties.Location",
        "x": 260,
        "y": 360,
        "wires": [
            [
                "b4cc6882.665ed",
                "2b0f92fa.a93b9e"
            ]
        ]
    },
    {
        "id": "d6e790bf.a8f418",
        "type": "link in",
        "z": "efbe0ac4.93412",
        "name": "Get Location From Worldmap",
        "links": [],
        "x": 115,
        "y": 360,
        "wires": [
            [
                "2abc6efc.deec32"
            ]
        ]
    },
    {
        "id": "2bb0d542.6255ca",
        "type": "link in",
        "z": "63c5fa2.b19a184",
        "name": "Get Location From Worldmap",
        "links": [
            "ddd04c7f.58dd08",
            "e790e99e.ac7ec",
            "fcbb6541.7e935"
        ],
        "x": 195,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "b4cc6882.665ed",
        "type": "debug",
        "z": "efbe0ac4.93412",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 830,
        "y": 420,
        "wires": []
    },
    {
        "id": "2b0f92fa.a93b9e",
        "type": "switch",
        "z": "efbe0ac4.93412",
        "name": "",
        "property": "payload.properties.Latitude",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "outputs": 1,
        "x": 730,
        "y": 360,
        "wires": [
            [
                "b729df60.c70d88"
            ]
        ]
    },
    {
        "id": "b729df60.c70d88",
        "type": "switch",
        "z": "efbe0ac4.93412",
        "name": "",
        "property": "payload.properties.Longitude",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "outputs": 1,
        "x": 870,
        "y": 360,
        "wires": [
            [
                "d9cab118.9267f"
            ]
        ]
    },
    {
        "id": "a06356cc.a200c8",
        "type": "debug",
        "z": "efbe0ac4.93412",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 550,
        "y": 20,
        "wires": []
    },
    {
        "id": "477b7bce.952014",
        "type": "set properties",
        "z": "efbe0ac4.93412",
        "deviceId": "",
        "schema": "b561db29.33fd2",
        "name": "",
        "propAll": true,
        "prop": "be6df8b37d4d",
        "valueType": "msg",
        "value": "payload.properties.Location",
        "x": 1360,
        "y": 140,
        "wires": [
            [
                "724a6fc2.7a702",
                "d4a81d32.f4d3b"
            ]
        ]
    },
    {
        "id": "724a6fc2.7a702",
        "type": "link out",
        "z": "efbe0ac4.93412",
        "name": "Set Device Properties",
        "links": [
            "64b5a66d.12d6a"
        ],
        "x": 1535,
        "y": 140,
        "wires": []
    },
    {
        "id": "64b5a66d.12d6a",
        "type": "link in",
        "z": "efbe0ac4.93412",
        "name": "Get Device Properties",
        "links": [
            "724a6fc2.7a702",
            "c7cde60c.446da8"
        ],
        "x": 115,
        "y": 300,
        "wires": [
            [
                "2572ce0c.afdb0a"
            ]
        ]
    },
    {
        "id": "d4a81d32.f4d3b",
        "type": "debug",
        "z": "efbe0ac4.93412",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "false",
        "x": 1570,
        "y": 80,
        "wires": []
    },
    {
        "id": "91189aca.65d0a",
        "type": "ui_text",
        "z": "5aba5c1a.28fe7c",
        "group": "ab27421e.a54d7",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Car",
        "format": "{{msg.deviceId}}",
        "layout": "row-spread",
        "x": 970,
        "y": 220,
        "wires": []
    },
    {
        "id": "f3cb228a.4dcc98",
        "type": "debug",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 450,
        "y": 280,
        "wires": []
    },
    {
        "id": "fc6ba5f8.8b80e",
        "type": "debug",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "false",
        "x": 470,
        "y": 60,
        "wires": []
    },
    {
        "id": "d37c931c.0372f",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "Redirect State",
        "links": [
            "f5978e36.15ac88"
        ],
        "x": 675,
        "y": 140,
        "wires": []
    },
    {
        "id": "da2b6fbb.f170e8",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "From UI Switch Start",
        "links": [
            "8dc374d6.1c5a78"
        ],
        "x": 535,
        "y": 1000,
        "wires": []
    },
    {
        "id": "9b3bb523.45e1d",
        "type": "link out",
        "z": "5aba5c1a.28fe7c",
        "name": "From UI Switch Stop",
        "links": [
            "ceaf9019.22c13"
        ],
        "x": 535,
        "y": 1040,
        "wires": []
    },
    {
        "id": "decc0953.376e98",
        "type": "switch",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "startDevice",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "stopDevice",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 370,
        "y": 1020,
        "wires": [
            [
                "da2b6fbb.f170e8"
            ],
            [
                "9b3bb523.45e1d"
            ]
        ]
    },
    {
        "id": "f5978e36.15ac88",
        "type": "link in",
        "z": "5aba5c1a.28fe7c",
        "name": "Simulator SwitchState",
        "links": [
            "d37c931c.0372f"
        ],
        "x": 75,
        "y": 1020,
        "wires": [
            [
                "7ed58c77.0a279c"
            ]
        ]
    },
    {
        "id": "7ed58c77.0a279c",
        "type": "switch",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "property": "payload.deviceType",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Car",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "outputs": 1,
        "x": 190,
        "y": 1020,
        "wires": [
            [
                "decc0953.376e98"
            ]
        ]
    },
    {
        "id": "70f1730a.2d5634",
        "type": "inject",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 140,
        "y": 1460,
        "wires": [
            [
                "dab4d6ea.101948"
            ]
        ]
    },
    {
        "id": "dab4d6ea.101948",
        "type": "change",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "simulation",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 1460,
        "wires": [
            [
                "ed71ac7e.a38ae"
            ]
        ]
    },
    {
        "id": "ed71ac7e.a38ae",
        "type": "debug",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 640,
        "y": 1460,
        "wires": []
    },
    {
        "id": "7d16e9f5.e24c5",
        "type": "switch",
        "z": "d574f97d.4d29a8",
        "name": "",
        "property": "payload.eventType",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "emailChange",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "CutOutTempChange",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "CutInTempChange",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "alertFrequencyChange",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "outputs": 4,
        "x": 430,
        "y": 120,
        "wires": [
            [
                "52a768a6.9ce9f8"
            ],
            [
                "dcb95825.320178"
            ],
            [
                "d6a927cc.017e38"
            ],
            [
                "84bbf2e.3c53c9"
            ]
        ]
    },
    {
        "id": "52a768a6.9ce9f8",
        "type": "change",
        "z": "d574f97d.4d29a8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "email",
                "pt": "global",
                "to": "payload.data",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "dcb95825.320178",
        "type": "change",
        "z": "d574f97d.4d29a8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "CutOutTemperature",
                "pt": "global",
                "to": "payload.data",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "d6a927cc.017e38",
        "type": "change",
        "z": "d574f97d.4d29a8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "CutInTemperature",
                "pt": "global",
                "to": "payload.data",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "84bbf2e.3c53c9",
        "type": "change",
        "z": "d574f97d.4d29a8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "alertFrequencyChange",
                "pt": "global",
                "to": "payload.data",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "942f9e89.61a44",
        "type": "function",
        "z": "d574f97d.4d29a8",
        "name": "Change Configuration",
        "func": "if(msg.payload.eventType=='emailChange')\ncontext.global.email=msg.payload.data;\n\n\nelse if(msg.payload.eventType=='CutOutTempChange')\ncontext.global.CutOutTemperature=msg.payload.data;\n\nelse if(msg.payload.eventType=='CutInTempChange')\ncontext.global.CutInTemperature=msg.payload.data;\n\nelse if(msg.payload.eventType=='alertFrequencyChange')\ncontext.global.alertFrequencyChange=msg.payload.data;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1000,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "f4865741.c85418",
        "type": "debug",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "1b56af72.487fb1",
        "type": "debug",
        "z": "5aba5c1a.28fe7c",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 730,
        "y": 380,
        "wires": []
    },
    {
        "id": "c3825c22.c0abf",
        "type": "switch",
        "z": "efbe0ac4.93412",
        "name": "",
        "property": "useTrack",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "custom",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "stuttgart",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "outputs": 3,
        "x": 770,
        "y": 140,
        "wires": [
            [
                "5e9cbdaf.463b3c"
            ],
            [
                "c9a45250.1c7a3"
            ],
            [
                "83905e3f.2fbb48"
            ]
        ]
    },
    {
        "id": "5e9cbdaf.463b3c",
        "type": "function",
        "z": "efbe0ac4.93412",
        "name": "",
        "func": "var useTrack = global.get(\"useTrack\");\n\n\n\n\nvar route = global.get(\"route\");\n\nif (route && route.state == \"ROUTE_FOUND\") {\n    var shapes = route.link_shapes;\n\n    var sh_ct = msg.shape_count || 0;\n    var pt_ct = msg.point_count || 0;\n    \n    if (sh_ct < shapes.length) {\n        var shape = shapes[sh_ct].shape;\n        if (shape) {\n            if (pt_ct < shape.length) {\n                ++pt_ct;\n                msg.point_count = pt_ct;\n                msg.location = shapes[sh_ct].shape[pt_ct];\n            }\n            \n            else if (pt_ct == shape.length) {\n                pt_ct = 0;\n                ++sh_ct;\n                msg.point_count = pt_ct;\n                msg.shape_count = sh_ct;\n                msg.location = shapes[sh_ct].shape[pt_ct];\n            }\n        }\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 930,
        "y": 100,
        "wires": [
            [
                "aca8c78f.5777c",
                "902d2f33.4eb068"
            ]
        ]
    },
    {
        "id": "c9a45250.1c7a3",
        "type": "function",
        "z": "efbe0ac4.93412",
        "name": "",
        "func": "var useTrack = global.get(\"useTrack\");\n\n\n\nvar eta = (Math.random() * 15).toFixed(2);\n\n\nvar track = global.get(\"track\");\n\n\nif (track) {\n\n    var ct = msg.count;\n    if (!ct && ct !== 0) {\n        ct = 0;\n    }\n    \n    else if (ct < track.length) {\n        ++ct;\n    }\n    \n    var loc = track[ct];\n    if (loc) {\n        msg.location = loc;\n        msg.count = ct;\n    }\n}\n\nelse {\n    msg.location = {\n        lat: 0,\n        lon: 0\n    };\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 930,
        "y": 140,
        "wires": [
            [
                "aca8c78f.5777c"
            ]
        ]
    },
    {
        "id": "83905e3f.2fbb48",
        "type": "change",
        "z": "efbe0ac4.93412",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "location.lat",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "location.lon",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 180,
        "wires": [
            [
                "aca8c78f.5777c"
            ]
        ]
    },
    {
        "id": "902d2f33.4eb068",
        "type": "debug",
        "z": "efbe0ac4.93412",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 1070,
        "y": 100,
        "wires": []
    },
    {
        "id": "aca8c78f.5777c",
        "type": "change",
        "z": "efbe0ac4.93412",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.d.Latitude",
                "pt": "msg",
                "to": "location.lat",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.d.Longitude",
                "pt": "msg",
                "to": "location.lon",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 140,
        "wires": [
            [
                "477b7bce.952014"
            ]
        ]
    },
    {
        "id": "77ae917.104c9f",
        "type": "function",
        "z": "efbe0ac4.93412",
        "name": "",
        "func": "var locs = global.get(\"route\").link_shapes;\n\nvar track = global.get(\"track\");\n\nif (locs) {\n    var ct = msg.count;\n    if (!ct && ct !== 0) {\n        ct = 0;\n    }\n    \n    else if (ct < locs.length) {\n        ++ct;\n    }\n    \n    var loc = locs[ct];\n    if (loc) {\n        msg.location = loc.shape[1];\n        msg.count = ct;\n    }\n    \n}\n\nelse if (track) {\n    var ct = msg.count;\n    if (!ct && ct !== 0) {\n        ct = 0;\n    }\n    \n    else if (ct < track.length) {\n        ++ct;\n    }\n    \n    var loc = track[ct];\n    if (loc) {\n        msg.location = loc;\n        msg.count = ct;\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "63889463.734554",
        "type": "switch",
        "z": "e46f1d17.0165a",
        "name": "",
        "property": "payload.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "orig",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "dest",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "current",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "outputs": 3,
        "x": 910,
        "y": 760,
        "wires": [
            [
                "502ae824.a9ec4",
                "e56ace6d.f09e5"
            ],
            [
                "9b1365cb.8aa7a8",
                "e56ace6d.f09e5"
            ],
            [
                "3fd03044.4536c"
            ]
        ]
    },
    {
        "id": "502ae824.a9ec4",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "orig",
                "pt": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 740,
        "wires": [
            [
                "9e1d3650.9cd9d",
                "b80abe57.a9c4b8"
            ]
        ]
    },
    {
        "id": "9b1365cb.8aa7a8",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "dest",
                "pt": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 780,
        "wires": [
            [
                "617cd706.0f49",
                "569cf4ed.f3277c"
            ]
        ]
    },
    {
        "id": "3fd03044.4536c",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 820,
        "wires": [
            [
                "3bb9a799.f34188"
            ]
        ]
    },
    {
        "id": "3bb9a799.f34188",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "",
        "links": [
            "ef80b044.e31c1",
            "46f40319.c208cc"
        ],
        "x": 1055,
        "y": 860,
        "wires": []
    },
    {
        "id": "dea00f8d.b36cb8",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orig.lat",
                "pt": "global",
                "to": "$number(msg.payload.lat)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 900,
        "wires": [
            [
                "dfd4bbfb.4b4ea8"
            ]
        ]
    },
    {
        "id": "d89ec66d.33939",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orig.lon",
                "pt": "global",
                "to": "$number(msg.payload.lon)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 940,
        "wires": [
            [
                "f1078da0.26d838"
            ]
        ]
    },
    {
        "id": "445e419e.bad118",
        "type": "switch",
        "z": "e46f1d17.0165a",
        "name": "",
        "property": "payload.point",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "orig",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "dest",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "current",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "outputs": 3,
        "x": 690,
        "y": 1000,
        "wires": [
            [
                "d89ec66d.33939",
                "dea00f8d.b36cb8"
            ],
            [
                "b07f6beb.80b23",
                "40ae5bbd.c467ec"
            ],
            [
                "9acad9d2.83dfc",
                "3ac8d7ac.ed613",
                "2afd4308.b0754c"
            ]
        ]
    },
    {
        "id": "b07f6beb.80b23",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "dest.lat",
                "pt": "global",
                "to": "$number(msg.payload.lat)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 980,
        "wires": [
            [
                "ad6e7ab1.489778"
            ]
        ]
    },
    {
        "id": "40ae5bbd.c467ec",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "dest.lon",
                "pt": "global",
                "to": "$number(msg.payload.lon)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 1020,
        "wires": [
            [
                "bd7b5bf1.67fbc8"
            ]
        ]
    },
    {
        "id": "9acad9d2.83dfc",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.lat",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1060,
        "wires": [
            [
                "e4daf030.42dbb8"
            ]
        ]
    },
    {
        "id": "3ac8d7ac.ed613",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.lon",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1100,
        "wires": [
            [
                "859ea541.cb7248"
            ]
        ]
    },
    {
        "id": "2afd4308.b0754c",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.d.Latitude",
                "pt": "msg",
                "to": "$number(msg.payload.lat)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.d.Longitude",
                "pt": "msg",
                "to": "$number(msg.payload.lon)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.deviceId",
                "pt": "msg",
                "to": "selectedDevice.deviceId",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1180,
        "wires": [
            [
                "bd4f119d.45bd58"
            ]
        ]
    },
    {
        "id": "859ea541.cb7248",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "",
        "links": [
            "ef80b044.e31c1"
        ],
        "x": 1075,
        "y": 1100,
        "wires": []
    },
    {
        "id": "e4daf030.42dbb8",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "",
        "links": [
            "46f40319.c208cc"
        ],
        "x": 1075,
        "y": 1060,
        "wires": []
    },
    {
        "id": "bd4f119d.45bd58",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Set Location From Worldmap",
        "links": [
            "7afa3bda.c29134"
        ],
        "x": 1075,
        "y": 1180,
        "wires": []
    },
    {
        "id": "bd7b5bf1.67fbc8",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$number(msg.payload.lon)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 1020,
        "wires": [
            [
                "569cf4ed.f3277c"
            ]
        ]
    },
    {
        "id": "ad6e7ab1.489778",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$number(msg.payload.lat)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 980,
        "wires": [
            [
                "617cd706.0f49"
            ]
        ]
    },
    {
        "id": "f1078da0.26d838",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$number(msg.payload.lon)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 940,
        "wires": [
            [
                "b80abe57.a9c4b8"
            ]
        ]
    },
    {
        "id": "dfd4bbfb.4b4ea8",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$number(msg.payload.lat)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 900,
        "wires": [
            [
                "9e1d3650.9cd9d"
            ]
        ]
    },
    {
        "id": "9e1d3650.9cd9d",
        "type": "ui_text",
        "z": "e46f1d17.0165a",
        "group": "7ac89b6.7f78f64",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Orig Lat",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1420,
        "y": 640,
        "wires": []
    },
    {
        "id": "b80abe57.a9c4b8",
        "type": "ui_text",
        "z": "e46f1d17.0165a",
        "group": "7ac89b6.7f78f64",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Orig Lon",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1420,
        "y": 680,
        "wires": []
    },
    {
        "id": "617cd706.0f49",
        "type": "ui_text",
        "z": "e46f1d17.0165a",
        "group": "7ac89b6.7f78f64",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Dest Lat",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1420,
        "y": 740,
        "wires": []
    },
    {
        "id": "569cf4ed.f3277c",
        "type": "ui_text",
        "z": "e46f1d17.0165a",
        "group": "7ac89b6.7f78f64",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Dest Lon",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1420,
        "y": 780,
        "wires": []
    },
    {
        "id": "721c1c69.c2eb7c",
        "type": "inject",
        "z": "e46f1d17.0165a",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 330,
        "y": 1360,
        "wires": [
            [
                "c13a18ee.981c1"
            ]
        ]
    },
    {
        "id": "c13a18ee.981c1",
        "type": "function",
        "z": "e46f1d17.0165a",
        "name": "",
        "func": "\nmsg.orig_latitude = 48.786564062660744;\nmsg.orig_longitude = 9.159948584259698;\nmsg.dest_latitude = 48.76443536921095;\nmsg.dest_longitude = 9.174914360046387;\n\n/*\nvar orig = global.get(\"orig\");\nvar dest = global.get(\"dest\");\n\nmsg.orig_latitude = orig.lat;\nmsg.orig_longitude = orig.lon;\nmsg.dest_latitude = dest.lat;\nmsg.dest_longitude = dest.lon;\n*/\nmsg.tenant_id = \"e885699e-2674-4ab1-81cc-9437f296e626\";\nmsg.contextMappingUrl = \"automotive.internetofthings.ibmcloud.com\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 1300,
        "wires": [
            [
                "1bb9acea.aaee7b",
                "44683edd.04fca"
            ]
        ]
    },
    {
        "id": "1bb9acea.aaee7b",
        "type": "http request",
        "z": "e46f1d17.0165a",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "url": "https://{{{contextMappingUrl}}}/mapinsights/mapservice/routesearch?tenant_id={{{tenant_id}}}&orig_latitude={{{orig_latitude}}}&orig_longitude={{{orig_longitude}}}&dest_latitude={{{dest_latitude}}}&dest_longitude={{{dest_longitude}}}",
        "tls": "",
        "x": 670,
        "y": 1300,
        "wires": [
            [
                "b1cfe2f5.0a8f68",
                "c02e0c7a.76435",
                "3b1b9fc.05acbe"
            ]
        ]
    },
    {
        "id": "b1cfe2f5.0a8f68",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 890,
        "y": 1360,
        "wires": []
    },
    {
        "id": "c02e0c7a.76435",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "route",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "93f3db44.e550b8",
        "type": "link in",
        "z": "e46f1d17.0165a",
        "name": "Get orig and dest locations",
        "links": [
            "7d02ea35.5cfbec",
            "c4153cab.5b9be",
            "22680110.2c82b6"
        ],
        "x": 295,
        "y": 1300,
        "wires": [
            [
                "c13a18ee.981c1"
            ]
        ]
    },
    {
        "id": "931c91ba.4f3848",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 510,
        "y": 1360,
        "wires": []
    },
    {
        "id": "5c2f92e5.f74724",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.name",
                "pt": "msg",
                "to": "selectedDevice.deviceId",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload.deleted",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 480,
        "wires": [
            [
                "2100c6bb.d0fb12"
            ]
        ]
    },
    {
        "id": "366ee35c.dcebec",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 720,
        "y": 1800,
        "wires": []
    },
    {
        "id": "630244f.14617bc",
        "type": "inject",
        "z": "e46f1d17.0165a",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 320,
        "y": 1800,
        "wires": [
            [
                "1d8e9e1a.b51aba"
            ]
        ]
    },
    {
        "id": "1d8e9e1a.b51aba",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "orig",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 1800,
        "wires": [
            [
                "366ee35c.dcebec"
            ]
        ]
    },
    {
        "id": "30c279f5.7659d6",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 720,
        "y": 1860,
        "wires": []
    },
    {
        "id": "23ac6703.359c98",
        "type": "inject",
        "z": "e46f1d17.0165a",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 320,
        "y": 1860,
        "wires": [
            [
                "e871005d.c0bcf"
            ]
        ]
    },
    {
        "id": "e871005d.c0bcf",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "dest",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 1860,
        "wires": [
            [
                "30c279f5.7659d6"
            ]
        ]
    },
    {
        "id": "44683edd.04fca",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 710,
        "y": 1360,
        "wires": []
    },
    {
        "id": "c8d81d42.0bcfd8",
        "type": "ui_button",
        "z": "e46f1d17.0165a",
        "name": "Start",
        "group": "d63ebccc.9e2da8",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Start",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "custom",
        "payloadType": "str",
        "topic": "",
        "x": 130,
        "y": 420,
        "wires": [
            [
                "332e1665.f3e322",
                "ab18e9c3.3cfc5"
            ]
        ]
    },
    {
        "id": "332e1665.f3e322",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "useTrack",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 420,
        "wires": [
            [
                "5b20ecb.892f894"
            ]
        ]
    },
    {
        "id": "8a5ea21d.cdb04",
        "type": "link in",
        "z": "e46f1d17.0165a",
        "name": "Clear Map",
        "links": [
            "26d81d31.e94e9a",
            "f97b97ab.7cbe78",
            "e56ace6d.f09e5",
            "4777046f.3cd524"
        ],
        "x": 995,
        "y": 460,
        "wires": [
            [
                "5c2f92e5.f74724",
                "d0d5039d.a2e528",
                "99caa565.01e688",
                "e951593e.6a8d48"
            ]
        ]
    },
    {
        "id": "a74350e6.8b4178",
        "type": "ui_button",
        "z": "e46f1d17.0165a",
        "name": "Clear",
        "group": "d63ebccc.9e2da8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Clear",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "{}",
        "payloadType": "json",
        "topic": "",
        "x": 130,
        "y": 460,
        "wires": [
            [
                "f97b97ab.7cbe78"
            ]
        ]
    },
    {
        "id": "f97b97ab.7cbe78",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Clear Map",
        "links": [
            "8a5ea21d.cdb04"
        ],
        "x": 255,
        "y": 460,
        "wires": []
    },
    {
        "id": "99caa565.01e688",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.name",
                "pt": "msg",
                "to": "orig",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.deleted",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 400,
        "wires": [
            [
                "2100c6bb.d0fb12"
            ]
        ]
    },
    {
        "id": "d0d5039d.a2e528",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.name",
                "pt": "msg",
                "to": "dest",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.deleted",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 440,
        "wires": [
            [
                "2100c6bb.d0fb12"
            ]
        ]
    },
    {
        "id": "e951593e.6a8d48",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "route",
                "pt": "global",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "track",
                "pt": "global",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "useTrack",
                "pt": "global",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "8d2c1cac.3e99",
        "type": "switch",
        "z": "e46f1d17.0165a",
        "name": "",
        "property": "dest",
        "propertyType": "global",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "false",
        "outputs": 1,
        "x": 650,
        "y": 420,
        "wires": [
            [
                "b88dbd4d.9a75d",
                "22680110.2c82b6"
            ]
        ]
    },
    {
        "id": "5b20ecb.892f894",
        "type": "switch",
        "z": "e46f1d17.0165a",
        "name": "",
        "property": "orig",
        "propertyType": "global",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "false",
        "outputs": 1,
        "x": 510,
        "y": 420,
        "wires": [
            [
                "8d2c1cac.3e99",
                "a7136a3e.a56388"
            ]
        ]
    },
    {
        "id": "22680110.2c82b6",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Set orig and dest locations",
        "links": [
            "93f3db44.e550b8"
        ],
        "x": 775,
        "y": 420,
        "wires": []
    },
    {
        "id": "b88dbd4d.9a75d",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 830,
        "y": 460,
        "wires": []
    },
    {
        "id": "1eaf82a0.cfd025",
        "type": "link in",
        "z": "e46f1d17.0165a",
        "name": "Clear Display",
        "links": [
            "3d1cdca0.93ef84",
            "27baf2e7.d3a0c6"
        ],
        "x": 1035,
        "y": 700,
        "wires": [
            [
                "502ae824.a9ec4",
                "9b1365cb.8aa7a8"
            ]
        ]
    },
    {
        "id": "2100c6bb.d0fb12",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "",
        "links": [
            "6f1f45b9.0a1194",
            "ff77c697.2afe6"
        ],
        "x": 1355,
        "y": 480,
        "wires": []
    },
    {
        "id": "cb269612.6e9eb8",
        "type": "set properties",
        "z": "e46f1d17.0165a",
        "deviceId": "",
        "schema": "b803d143.3bc1c8",
        "name": "",
        "propAll": true,
        "prop": "be6df8b37d4d",
        "valueType": "msg",
        "value": "payload.properties.Location",
        "x": 1320,
        "y": 1260,
        "wires": [
            [
                "c7cde60c.446da8",
                "41b60427.3eb1a4"
            ]
        ]
    },
    {
        "id": "c7cde60c.446da8",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Set Device Properties",
        "links": [
            "64b5a66d.12d6a"
        ],
        "x": 1500,
        "y": 1260,
        "wires": []
    },
    {
        "id": "3b1b9fc.05acbe",
        "type": "function",
        "z": "e46f1d17.0165a",
        "name": "",
        "func": "msg.payload.ETA = Math.random() * 15;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 870,
        "y": 1260,
        "wires": [
            [
                "438b8864.effaf"
            ]
        ]
    },
    {
        "id": "438b8864.effaf",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.deviceId",
                "pt": "msg",
                "to": "selectedDevice.deviceId",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 1260,
        "wires": [
            [
                "cb269612.6e9eb8"
            ]
        ]
    },
    {
        "id": "41b60427.3eb1a4",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 1550,
        "y": 1320,
        "wires": []
    },
    {
        "id": "4a21db8a.ce4a14",
        "type": "link in",
        "z": "e46f1d17.0165a",
        "name": "Point",
        "links": [
            "d67dcc21.531fe8",
            "fcbb6541.7e935"
        ],
        "x": 540,
        "y": 1000,
        "wires": [
            [
                "445e419e.bad118"
            ]
        ]
    },
    {
        "id": "b5603a62.540c68",
        "type": "link in",
        "z": "e46f1d17.0165a",
        "name": "Delete From Worldmap",
        "links": [
            "b93b094.1cdf778",
            "a2db68c6.5f174"
        ],
        "x": 815,
        "y": 760,
        "wires": [
            [
                "63889463.734554"
            ]
        ]
    },
    {
        "id": "e56ace6d.f09e5",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Clear Map",
        "links": [
            "8a5ea21d.cdb04"
        ],
        "x": 1015,
        "y": 660,
        "wires": []
    },
    {
        "id": "ab18e9c3.3cfc5",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 310,
        "y": 360,
        "wires": []
    },
    {
        "id": "a7136a3e.a56388",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 670,
        "y": 460,
        "wires": []
    },
    {
        "id": "9eaccdf0.1be868",
        "type": "http in",
        "z": "e46f1d17.0165a",
        "name": "",
        "url": "/test",
        "method": "post",
        "swaggerDoc": "",
        "x": 260,
        "y": 2820,
        "wires": [
            [
                "2e727687.7b5e32",
                "d49eaf22.c753c"
            ]
        ]
    },
    {
        "id": "d49eaf22.c753c",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 600,
        "y": 2880,
        "wires": []
    },
    {
        "id": "2e727687.7b5e32",
        "type": "http response",
        "z": "e46f1d17.0165a",
        "name": "",
        "x": 580,
        "y": 2820,
        "wires": []
    },
    {
        "id": "a74f2479.186768",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orig_latitude",
                "pt": "msg",
                "to": "48.786564062660744",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "orig_longitude",
                "pt": "msg",
                "to": "9.159948584259698",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "dest_latitude",
                "pt": "msg",
                "to": "52.51472572232442",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "dest_longitude",
                "pt": "msg",
                "to": "13.389201164245605",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tenant_id",
                "pt": "msg",
                "to": "e885699e-2674-4ab1-81cc-9437f296e626",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 3000,
        "wires": [
            []
        ]
    },
    {
        "id": "c1e998af.d7243",
        "type": "http request",
        "z": "e46f1d17.0165a",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "url": "https://automotive.internetofthings.ibmcloud.com/mapinsights/mapservice/map/matching?tenant_id={{{tenant_id}}}&latitude={{{latitude}}}&longitude={{{longitude}}}",
        "tls": "",
        "x": 720,
        "y": 3140,
        "wires": [
            [
                "b077353a.acd76",
                "7c2b9e70.15c398"
            ]
        ]
    },
    {
        "id": "598d0b26.78c07c",
        "type": "inject",
        "z": "e46f1d17.0165a",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 240,
        "y": 3140,
        "wires": [
            [
                "c1e998af.d7243",
                "b2d2134c.1d3518"
            ]
        ]
    },
    {
        "id": "b077353a.acd76",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 1020,
        "y": 3100,
        "wires": []
    },
    {
        "id": "e629a9bc.0f3f98",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latitude",
                "pt": "msg",
                "to": "48.786564062660744",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "longitude",
                "pt": "msg",
                "to": "9.159948584259698",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "tenant_id",
                "pt": "msg",
                "to": "e885699e-2674-4ab1-81cc-9437f296e626",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 3140,
        "wires": [
            [
                "d2a23731.65f9f"
            ]
        ]
    },
    {
        "id": "d2a23731.65f9f",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 700,
        "y": 3300,
        "wires": []
    },
    {
        "id": "b2d2134c.1d3518",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 460,
        "y": 3220,
        "wires": []
    },
    {
        "id": "67667cf4.e3eb04",
        "type": "function",
        "z": "e46f1d17.0165a",
        "name": "",
        "func": "msg.tenant_id = \"e885699e-2674-4ab1-81cc-9437f296e626\";\nmsg.latitude = 48.786564062660744;\nmsg.longitude = 9.159948584259698;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 500,
        "y": 3300,
        "wires": [
            [
                "c1e998af.d7243",
                "d2a23731.65f9f"
            ]
        ]
    },
    {
        "id": "5cc8157e.4b61d4",
        "type": "inject",
        "z": "e46f1d17.0165a",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 240,
        "y": 3300,
        "wires": [
            [
                "67667cf4.e3eb04"
            ]
        ]
    },
    {
        "id": "7c2b9e70.15c398",
        "type": "switch",
        "z": "e46f1d17.0165a",
        "name": "",
        "property": "payload.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 1010,
        "y": 3180,
        "wires": [
            [
                "5f0cb551.8c71dc"
            ],
            []
        ]
    },
    {
        "id": "5f0cb551.8c71dc",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 3140,
        "wires": [
            [
                "aad29940.c1cf3"
            ]
        ]
    },
    {
        "id": "aad29940.c1cf3",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 1420,
        "y": 3100,
        "wires": []
    },
    {
        "id": "cb2d4d9c.5610f",
        "type": "ui_text",
        "z": "e46f1d17.0165a",
        "group": "a9a678bc.1cb0d",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "Latitude",
        "label": "Latitude",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1060,
        "y": 60,
        "wires": []
    },
    {
        "id": "d9b3363e.8d9108",
        "type": "link in",
        "z": "e46f1d17.0165a",
        "name": "Set Latitude",
        "links": [
            "3ba14ecb.3c14fa",
            "ce3c4bba.ce55",
            "e5dd5a9d.9f3ff8",
            "3bb9a799.f34188",
            "e4daf030.42dbb8"
        ],
        "x": 895,
        "y": 60,
        "wires": [
            [
                "cb2d4d9c.5610f"
            ]
        ]
    },
    {
        "id": "8205c376.b8c5c",
        "type": "link in",
        "z": "e46f1d17.0165a",
        "name": "Set Longitude",
        "links": [
            "9fbed97f.ffdca8",
            "3b361c0a.f941dc",
            "e5dd5a9d.9f3ff8",
            "3bb9a799.f34188",
            "859ea541.cb7248"
        ],
        "x": 895,
        "y": 100,
        "wires": [
            [
                "87145d39.0b2fd"
            ]
        ]
    },
    {
        "id": "87145d39.0b2fd",
        "type": "ui_text",
        "z": "e46f1d17.0165a",
        "group": "a9a678bc.1cb0d",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "Longitude",
        "label": "Longitude",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1060,
        "y": 100,
        "wires": []
    },
    {
        "id": "3ba14ecb.3c14fa",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Set Latitude",
        "links": [
            "d9b3363e.8d9108"
        ],
        "x": 715,
        "y": 60,
        "wires": []
    },
    {
        "id": "9fbed97f.ffdca8",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Set Longitude",
        "links": [
            "8205c376.b8c5c"
        ],
        "x": 715,
        "y": 100,
        "wires": []
    },
    {
        "id": "c10aefec.268ce8",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.d.Latitude",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 60,
        "wires": [
            [
                "3ba14ecb.3c14fa"
            ]
        ]
    },
    {
        "id": "e1e0f61c.a4446",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.d.Longitude",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 100,
        "wires": [
            [
                "9fbed97f.ffdca8"
            ]
        ]
    },
    {
        "id": "27be4a5d.74febe",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.lat",
                "pt": "msg",
                "to": "payload.d.Latitude",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.lon",
                "pt": "msg",
                "to": "payload.d.Longitude",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.name",
                "pt": "msg",
                "to": "deviceId",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "car",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.command.lat",
                "pt": "msg",
                "to": "payload.d.Latitude",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.command.lon",
                "pt": "msg",
                "to": "payload.d.Longitude",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.d",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 140,
        "wires": [
            [
                "126972c.6070e8d",
                "77fe7e3c.c40558"
            ]
        ]
    },
    {
        "id": "77fe7e3c.c40558",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "To Worldmap",
        "links": [
            "ff77c697.2afe6"
        ],
        "x": 715,
        "y": 140,
        "wires": []
    },
    {
        "id": "126972c.6070e8d",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "false",
        "x": 770,
        "y": 180,
        "wires": []
    },
    {
        "id": "692698a9.30e058",
        "type": "worldmap",
        "z": "e46f1d17.0165a",
        "name": "",
        "lat": "",
        "lon": "",
        "zoom": "16",
        "layer": "OSM",
        "cluster": "",
        "maxage": "",
        "usermenu": "show",
        "panit": "true",
        "x": 1070,
        "y": 140,
        "wires": []
    },
    {
        "id": "ff77c697.2afe6",
        "type": "link in",
        "z": "e46f1d17.0165a",
        "name": "Worldmap",
        "links": [
            "77fe7e3c.c40558",
            "2100c6bb.d0fb12"
        ],
        "x": 895,
        "y": 140,
        "wires": [
            [
                "692698a9.30e058"
            ]
        ]
    },
    {
        "id": "4211af19.5dc3e",
        "type": "ibmiot in",
        "z": "e46f1d17.0165a",
        "authentication": "boundService",
        "apiKey": "",
        "inputType": "evt",
        "deviceId": "",
        "applicationId": "",
        "deviceType": "Car",
        "eventType": "getLocation",
        "commandType": "",
        "format": "json",
        "name": "IBM IoT",
        "service": "registered",
        "allDevices": true,
        "allApplications": "",
        "allDeviceTypes": "",
        "allEvents": "",
        "allCommands": "",
        "allFormats": "",
        "qos": 0,
        "x": 100,
        "y": 100,
        "wires": [
            [
                "6d0c9267.ac8f64",
                "be3db3fc.66e3e"
            ]
        ]
    },
    {
        "id": "6d0c9267.ac8f64",
        "type": "switch",
        "z": "e46f1d17.0165a",
        "name": "",
        "property": "deviceId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "selectedDevice.deviceId",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "outputs": 1,
        "x": 250,
        "y": 100,
        "wires": [
            [
                "c10aefec.268ce8",
                "e1e0f61c.a4446",
                "27be4a5d.74febe"
            ]
        ]
    },
    {
        "id": "be3db3fc.66e3e",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 270,
        "y": 140,
        "wires": []
    },
    {
        "id": "21c98d41.ca58da",
        "type": "ui_template",
        "z": "e46f1d17.0165a",
        "group": "1b4a11b1.5d4f7e",
        "name": "Map",
        "order": 1,
        "width": "12",
        "height": "12",
        "format": "<div ng-bind-html=\"msg.payload | trusted\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 578.4666442871094,
        "y": 265,
        "wires": [
            []
        ]
    },
    {
        "id": "667a4db1.b408e4",
        "type": "inject",
        "z": "e46f1d17.0165a",
        "name": "",
        "topic": "",
        "payload": "/worldmap",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 160,
        "y": 265.1166687011719,
        "wires": [
            [
                "63dd2603.d744b"
            ]
        ]
    },
    {
        "id": "63dd2603.d744b",
        "type": "template",
        "z": "e46f1d17.0165a",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<iframe src=\"{{{payload}}}\" height=\"600px\" width=\"600px\" ></iframe>",
        "x": 340,
        "y": 265.1166687011719,
        "wires": [
            [
                "21c98d41.ca58da"
            ]
        ]
    },
    {
        "id": "ac89b42a.b2163",
        "type": "cloudant in",
        "z": "e46f1d17.0165a",
        "name": "",
        "cloudant": "",
        "database": "tracks",
        "service": "nuke-horizon-sim-cloudantNoSQLDB",
        "search": "_id_",
        "design": "",
        "index": "",
        "x": 410,
        "y": 580,
        "wires": [
            [
                "fb4e189.2262368",
                "87b2c125.6e23f8"
            ]
        ]
    },
    {
        "id": "f688cce1.d647a",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "useTrack",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "fb4e189.2262368",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "track",
                "pt": "global",
                "to": "payload.data.trackData[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 580,
        "wires": [
            [
                "c4d22bd4.7a10d8"
            ]
        ]
    },
    {
        "id": "87b2c125.6e23f8",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 650,
        "y": 620,
        "wires": []
    },
    {
        "id": "c4d22bd4.7a10d8",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 830,
        "y": 580,
        "wires": []
    },
    {
        "id": "aa69cde7.d345f",
        "type": "ui_dropdown",
        "z": "e46f1d17.0165a",
        "name": "",
        "label": "Tracks",
        "place": "Select option",
        "group": "d63ebccc.9e2da8",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "options": [
            {
                "label": "Stuttgart",
                "value": "stuttgart",
                "type": "str"
            },
            {
                "label": "Custom",
                "value": "custom",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "x": 130,
        "y": 540,
        "wires": [
            [
                "f688cce1.d647a",
                "a2ef5c33.af92"
            ]
        ]
    },
    {
        "id": "b09d5376.db1aa",
        "type": "ui_text",
        "z": "e46f1d17.0165a",
        "group": "ab27421e.a54d7",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Status",
        "label": "Status",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 650,
        "y": 520,
        "wires": []
    },
    {
        "id": "10c7de18.c797ea",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Right click on the map to set a point of origin and a destination. Label the points \"orig\" and \"dest\".",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 540,
        "wires": [
            [
                "b09d5376.db1aa"
            ]
        ]
    },
    {
        "id": "a2ef5c33.af92",
        "type": "switch",
        "z": "e46f1d17.0165a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "custom",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 270,
        "y": 540,
        "wires": [
            [
                "10c7de18.c797ea"
            ],
            [
                "ac89b42a.b2163"
            ]
        ]
    },
    {
        "id": "c10db640.947de",
        "type": "worldmap in",
        "z": "e46f1d17.0165a",
        "name": "",
        "x": 780,
        "y": 280,
        "wires": [
            [
                "5c4682f.7cd06fc",
                "262ad1fa.e4c1f6"
            ]
        ]
    },
    {
        "id": "5c4682f.7cd06fc",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 970,
        "y": 220,
        "wires": []
    },
    {
        "id": "262ad1fa.e4c1f6",
        "type": "switch",
        "z": "e46f1d17.0165a",
        "name": "",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "connected",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "disconnected",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "delete",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "point",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "outputs": 4,
        "x": 1150,
        "y": 280,
        "wires": [
            [
                "4777046f.3cd524",
                "27baf2e7.d3a0c6"
            ],
            [
                "4777046f.3cd524",
                "27baf2e7.d3a0c6"
            ],
            [
                "a2db68c6.5f174"
            ],
            [
                "fcbb6541.7e935"
            ]
        ]
    },
    {
        "id": "4777046f.3cd524",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Clear Map",
        "links": [
            "8a5ea21d.cdb04"
        ],
        "x": 1295,
        "y": 260,
        "wires": []
    },
    {
        "id": "27baf2e7.d3a0c6",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Clear Display",
        "links": [
            "1eaf82a0.cfd025"
        ],
        "x": 1295,
        "y": 220,
        "wires": []
    },
    {
        "id": "9af16983.5f9bf",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "true",
        "x": 1150,
        "y": 220,
        "wires": []
    },
    {
        "id": "fcbb6541.7e935",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Point",
        "links": [
            "2bb0d542.6255ca",
            "4a21db8a.ce4a14"
        ],
        "x": 1295,
        "y": 340,
        "wires": []
    },
    {
        "id": "a2db68c6.5f174",
        "type": "link out",
        "z": "e46f1d17.0165a",
        "name": "Delete From Worldmap",
        "links": [
            "b5603a62.540c68"
        ],
        "x": 1295,
        "y": 300,
        "wires": []
    },
    {
        "id": "47fc5ccd.0f0144",
        "type": "function",
        "z": "e46f1d17.0165a",
        "name": "",
        "func": "var oldPayload = context.get(\"payload\", msg.payload);\nvar newPayload = msg.payload;\nif (JSON.stringify(oldPayload) !== JSON.stringify(newPayload)) {\n    context.set(\"payload\", newPayload);\n    msg.a = JSON.stringify(oldPayload);\n    msg.b = JSON.stringify(newPayload);\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 950,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "59b594c5.2d6644",
        "type": "inject",
        "z": "e46f1d17.0165a",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "x": 360,
        "y": 1520,
        "wires": [
            [
                "af50ece.9cc9e1"
            ]
        ]
    },
    {
        "id": "af50ece.9cc9e1",
        "type": "change",
        "z": "e46f1d17.0165a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "VCAP_SERVICES",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 1520,
        "wires": [
            [
                "1c29e66f.588bb2"
            ]
        ]
    },
    {
        "id": "1c29e66f.588bb2",
        "type": "debug",
        "z": "e46f1d17.0165a",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 780,
        "y": 1520,
        "wires": []
    },
    {
        "id": "1151a31e.905295",
        "type": "ui_ui_control",
        "z": "e46f1d17.0165a",
        "name": "ui control",
        "x": 1440,
        "y": 80,
        "wires": [
            [
                "ae95b02b.0c3df8"
            ]
        ]
    },
    {
        "id": "307bbbcc.238d1c",
        "type": "ui_button",
        "z": "e46f1d17.0165a",
        "name": "",
        "group": "30859307.cd8a94",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Back",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "0",
        "payloadType": "str",
        "topic": "",
        "x": 1260,
        "y": 79,
        "wires": [
            [
                "1151a31e.905295"
            ]
        ]
    },
    {
        "id": "ae95b02b.0c3df8",
        "type": "ui_template",
        "z": "e46f1d17.0165a",
        "group": "66f44f97.7327f8",
        "name": "Header",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<img src=\"/images/custom/blue_gradient_top.png\" />\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 1451,
        "y": 163,
        "wires": [
            [
                "f7e2ef0b.3f4f18"
            ]
        ]
    },
    {
        "id": "f7e2ef0b.3f4f18",
        "type": "ui_template",
        "z": "e46f1d17.0165a",
        "group": "30859307.cd8a94",
        "name": "Footer",
        "order": 3,
        "width": "0",
        "height": "0",
        "format": "<img src=\"/images/custom/blue_gradient_bottom.png\" />",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 1448,
        "y": 228,
        "wires": [
            []
        ]
    }
]